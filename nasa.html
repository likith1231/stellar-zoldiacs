<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Space Explorer - Profile & Launch</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
            overflow-x: hidden;
            overflow-y: auto;
        }
        
        .galaxy-bg {
            background: linear-gradient(135deg, #0c0c1e 0%, #1a1a3e 25%, #2d1b69 50%, #1e0a3e 75%, #0f0f23 100%);
            position: relative;
            overflow: hidden;
        }
        
        .galaxy-bg::before {
            content: '';
            position: fixed;
            top: -20%;
            left: -20%;
            width: 140%;
            height: 140%;
            background: linear-gradient(135deg, #0c0c1e 0%, #1a1a3e 25%, #2d1b69 50%, #1e0a3e 75%, #0f0f23 100%);
            animation: zoomIn 20s ease-in-out infinite;
            z-index: -1;
        }
        
        @keyframes zoomIn {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }
        
        .star:nth-child(odd) {
            animation-delay: 1s;
        }
        
        .star:nth-child(3n) {
            animation-delay: 2s;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        .shooting-star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: linear-gradient(45deg, #fff, #87ceeb);
            border-radius: 50%;
            animation: shoot 4s linear infinite;
        }
        
        @keyframes shoot {
            0% {
                transform: translateX(-100px) translateY(100px);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateX(100vw) translateY(-100px);
                opacity: 0;
            }
        }
        
        .nebula {
            position: fixed;
            border-radius: 50%;
            filter: blur(40px);
            animation: float 8s ease-in-out infinite;
            pointer-events: none;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        .planet {
            position: fixed;
            border-radius: 50%;
            animation: planetOrbit 25s linear infinite;
            pointer-events: none;
            transition: all 0.5s ease;
        }
        
        @keyframes planetOrbit {
            0% { transform: rotate(0deg) translateX(100px) rotate(0deg) scale(1); }
            25% { transform: rotate(90deg) translateX(120px) rotate(-90deg) scale(1.1); }
            50% { transform: rotate(180deg) translateX(140px) rotate(-180deg) scale(1.2); }
            75% { transform: rotate(270deg) translateX(120px) rotate(-270deg) scale(1.1); }
            100% { transform: rotate(360deg) translateX(100px) rotate(-360deg) scale(1); }
        }
        
        .mars {
            background: radial-gradient(circle at 30% 30%, #ff6b47, #cc4125, #8b2914);
            box-shadow: inset -10px -10px 20px rgba(0,0,0,0.3), 0 0 30px rgba(255,107,71,0.3);
        }
        
        .jupiter {
            background: radial-gradient(circle at 30% 30%, #d8ca9d, #b8860b, #8b7355);
            box-shadow: inset -15px -15px 30px rgba(0,0,0,0.3), 0 0 40px rgba(216,202,157,0.3);
        }
        
        .saturn {
            background: radial-gradient(circle at 30% 30%, #fad5a5, #deb887, #cd853f);
            box-shadow: inset -12px -12px 25px rgba(0,0,0,0.3), 0 0 35px rgba(250,213,165,0.3);
        }
        
        .saturn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200%;
            height: 4px;
            background: linear-gradient(90deg, transparent, rgba(250,213,165,0.6), transparent);
            border-radius: 50%;
        }
        
        .neptune {
            background: radial-gradient(circle at 30% 30%, #4169e1, #1e3a8a, #1e40af);
            box-shadow: inset -10px -10px 20px rgba(0,0,0,0.3), 0 0 30px rgba(65,105,225,0.3);
        }
        
        .venus {
            background: radial-gradient(circle at 30% 30%, #ffc649, #ff8c00, #ff6347);
            box-shadow: inset -8px -8px 15px rgba(0,0,0,0.3), 0 0 25px rgba(255,198,73,0.3);
        }
        
        .rocket {
            position: fixed;
            width: 60px;
            height: 120px;
            z-index: 50;
            animation: rocketFlight 6s linear infinite;
        }
        
        @keyframes rocketFlight {
            0% {
                left: -80px;
                bottom: 10px;
                transform: rotate(45deg);
            }
            50% {
                left: 50%;
                bottom: 50%;
                transform: rotate(45deg);
            }
            100% {
                left: calc(100% + 80px);
                bottom: 90%;
                transform: rotate(45deg);
            }
        }
        
        .rocket-flame {
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 30px;
            background: linear-gradient(180deg, #ff6b35 0%, #f7931e 50%, #ffff00 100%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: flameFlicker 0.3s ease-in-out infinite alternate;
        }
        
        @keyframes flameFlicker {
            0% {
                height: 25px;
                opacity: 0.8;
            }
            100% {
                height: 35px;
                opacity: 1;
            }
        }
        
        .launch-panel {
            animation: panelGlow 3s ease-in-out infinite alternate;
        }
        
        @keyframes panelGlow {
            0% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }
            100% { box-shadow: 0 0 40px rgba(59, 130, 246, 0.6), 0 0 60px rgba(147, 51, 234, 0.3); }
        }
        
        .launch-button {
            animation: buttonPulse 2s ease-in-out infinite;
        }
        
        @keyframes buttonPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .slide-transition {
            transition: all 1s ease-in-out;
        }
        
        .fade-out {
            opacity: 0;
            transform: scale(0.9);
        }
        
        .fade-in {
            opacity: 1;
            transform: scale(1);
        }
        
        /* Space Weather Animations */
        .sun-rays {
            animation: rotate 8s linear infinite;
        }
        
        .ray {
            position: absolute;
            width: 4px;
            height: 16px;
            background: linear-gradient(to bottom, #fbbf24, #f59e0b);
            border-radius: 2px;
            transform-origin: center bottom;
        }
        
        .ray-1 { top: -20px; left: 50%; transform: translateX(-50%) rotate(0deg); }
        .ray-2 { top: -14px; right: -14px; transform: rotate(45deg); }
        .ray-3 { top: 50%; right: -20px; transform: translateY(-50%) rotate(90deg); }
        .ray-4 { bottom: -14px; right: -14px; transform: rotate(135deg); }
        .ray-5 { bottom: -20px; left: 50%; transform: translateX(-50%) rotate(180deg); }
        .ray-6 { bottom: -14px; left: -14px; transform: rotate(225deg); }
        .ray-7 { top: 50%; left: -20px; transform: translateY(-50%) rotate(270deg); }
        .ray-8 { top: -14px; left: -14px; transform: rotate(315deg); }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .solar-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: radial-gradient(circle, #fbbf24, #f59e0b);
            border-radius: 50%;
            animation: solarWind 3s linear infinite;
        }
        
        .particle-1 { top: -8px; animation-delay: 0s; }
        .particle-2 { top: -4px; animation-delay: 0.6s; }
        .particle-3 { top: 0px; animation-delay: 1.2s; }
        .particle-4 { top: 4px; animation-delay: 1.8s; }
        .particle-5 { top: 8px; animation-delay: 2.4s; }
        
        @keyframes solarWind {
            0% {
                left: 0;
                opacity: 1;
                transform: scale(1);
            }
            70% {
                opacity: 1;
                transform: scale(1.2);
            }
            100% {
                left: 100%;
                opacity: 0;
                transform: scale(0.5);
            }
        }
        
        .magnetic-shield {
            animation: shieldPulse 2s ease-in-out infinite;
        }
        
        @keyframes shieldPulse {
            0%, 100% {
                transform: scale(1);
                border-color: #60a5fa;
                box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
            }
            50% {
                transform: scale(1.05);
                border-color: #3b82f6;
                box-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
            }
        }
        
        .aurora {
            animation: auroraShimmer 3s ease-in-out infinite;
        }
        
        @keyframes auroraShimmer {
            0%, 100% {
                opacity: 0.4;
                transform: translateX(-50%) scaleX(1);
            }
            50% {
                opacity: 0.8;
                transform: translateX(-50%) scaleX(1.2);
            }
        }
        
        /* Rocket Launch Animations */
        @keyframes rocketLaunchUp {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            50% {
                transform: translateY(-100px) scale(1.2);
                opacity: 1;
            }
            100% {
                transform: translateY(-300px) scale(0.5);
                opacity: 0;
            }
        }
        
        @keyframes flameIgnite {
            0% {
                opacity: 0;
                transform: translateX(-50%) scale(0.5);
            }
            100% {
                opacity: 1;
                transform: translateX(-50%) scale(1);
            }
        }
        
        @keyframes categoryRocketLaunch {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            30% {
                transform: translate(-50%, -70%) scale(1.1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -200%) scale(0.3);
                opacity: 0;
            }
        }
        
        .rocket-flame-small.ignited {
            animation: flameIgnite 0.3s ease-out forwards;
        }

        /* Level Spinning Animations - Disabled */
        .level-planet {
            /* No rotation animation */
        }
        
        .level-orbit-2 .level-planet {
            /* No rotation animation */
        }
        
        .level-orbit-3 .level-planet {
            /* No rotation animation */
        }
        
        .level-orbit-4 .level-planet {
            /* No rotation animation */
        }
        
        .level-orbit-5 .level-planet {
            /* No rotation animation */
        }

        /* Quiz Connection Lines */
        .quiz-connection {
            position: absolute;
            background: linear-gradient(90deg, #a855f7, #ec4899);
            height: 2px;
            border-radius: 1px;
            animation: connectionPulse 2s ease-in-out infinite;
            z-index: 5;
        }
        
        @keyframes connectionPulse {
            0%, 100% {
                opacity: 0.6;
                box-shadow: 0 0 5px rgba(168, 85, 247, 0.3);
            }
            50% {
                opacity: 1;
                box-shadow: 0 0 10px rgba(168, 85, 247, 0.6);
            }
        }
    </style>
</head>
<body class="galaxy-bg min-h-screen py-2 sm:py-4 lg:py-8 overflow-x-hidden overflow-y-auto">
    <!-- Animated Galaxy Elements -->
    <div class="stars"></div>
    
    <!-- Floating Nebulas -->
    <div class="nebula w-40 h-40 bg-purple-500 opacity-20 top-10 left-10"></div>
    <div class="nebula w-32 h-32 bg-blue-400 opacity-15 top-32 right-20" style="animation-delay: -2s;"></div>
    <div class="nebula w-48 h-48 bg-pink-400 opacity-10 bottom-20 left-32" style="animation-delay: -4s;"></div>
    <div class="nebula w-28 h-28 bg-cyan-400 opacity-12 top-1/2 right-10" style="animation-delay: -6s;"></div>
    
    <!-- Orbiting Planets -->
    <div class="planet mars w-16 h-16 top-20 left-1/4"></div>
    <div class="planet jupiter w-24 h-24 top-40 right-1/3" style="animation-delay: -5s;"></div>
    <div class="planet saturn w-20 h-20 bottom-32 left-1/2" style="animation-delay: -10s;"></div>
    <div class="planet neptune w-14 h-14 top-1/3 left-10" style="animation-delay: -15s;"></div>
    <div class="planet venus w-12 h-12 bottom-20 right-20" style="animation-delay: -20s;"></div>
    
    <!-- Earth -->
    <div class="fixed bottom-10 right-10 w-28 h-28 rounded-full bg-gradient-to-br from-blue-500 via-green-500 to-blue-600 opacity-40 animate-pulse pointer-events-none"></div>
    
    <!-- Moon -->
    <div class="fixed bottom-20 right-40 w-10 h-10 rounded-full bg-gray-300 opacity-50 animate-bounce pointer-events-none" style="animation-delay: -1s;"></div>
    
    <!-- Space Station -->
    <div class="fixed top-1/4 left-20 w-6 h-3 opacity-70 pointer-events-none" style="animation: float 8s ease-in-out infinite; background: linear-gradient(45deg, #c0c0c0, #ffffff);"></div>
    
    <!-- Shooting Stars -->
    <div class="shooting-star top-16 left-0" style="animation-delay: 0s;"></div>
    <div class="shooting-star top-32 left-0" style="animation-delay: 2s;"></div>
    <div class="shooting-star top-48 left-0" style="animation-delay: 3.5s;"></div>
    <div class="shooting-star top-64 left-0" style="animation-delay: 5s;"></div>

    <!-- Animated Rocket (only on profile page) -->
    <div id="animatedRocket" class="rocket">
        <!-- Rocket Body -->
        <svg viewBox="0 0 60 120" class="w-full h-full">
            <!-- Main body -->
            <ellipse cx="30" cy="85" rx="12" ry="25" fill="#e5e7eb"/>
            <!-- Nose cone -->
            <path d="M18 60 L30 20 L42 60 Z" fill="#dc2626"/>
            <!-- Fins -->
            <path d="M18 95 L10 110 L18 105 Z" fill="#374151"/>
            <path d="M42 95 L50 110 L42 105 Z" fill="#374151"/>
            <!-- Window -->
            <circle cx="30" cy="70" r="6" fill="#3b82f6" opacity="0.8"/>
            <circle cx="30" cy="70" r="4" fill="#87ceeb" opacity="0.6"/>
            <!-- Details -->
            <rect x="25" y="80" width="10" height="3" fill="#6b7280"/>
            <rect x="25" y="88" width="10" height="3" fill="#6b7280"/>
        </svg>
        <!-- Rocket Flame -->
        <div class="rocket-flame"></div>
    </div>

    <!-- Login Page -->
    <div id="loginSection" class="slide-transition min-h-screen flex items-center justify-center py-4">
        <div class="w-full max-w-md bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900 bg-opacity-90 backdrop-blur-sm rounded-xl shadow-2xl p-4 sm:p-6 lg:p-8 relative z-10 border border-blue-400 border-opacity-30 mx-2 sm:mx-4 lg:mx-auto">
            <!-- Earth in background -->
            <div class="absolute -top-4 -right-4 w-24 h-24 rounded-full bg-gradient-to-br from-blue-400 via-green-400 to-blue-600 opacity-20 animate-pulse"></div>
            
            <!-- Satellite orbit -->
            <div class="absolute top-8 right-8 w-2 h-2 bg-gray-300 rounded-full animate-ping"></div>
            
            <!-- Space station -->
            <div class="absolute bottom-4 left-4 w-3 h-3 bg-yellow-400 rounded-sm opacity-60" style="animation: float 6s ease-in-out infinite;"></div>
            
            <div class="text-center mb-6 sm:mb-8">
                <div class="w-12 h-12 sm:w-16 sm:h-16 bg-indigo-600 rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4">
                    <svg class="w-6 h-6 sm:w-8 sm:h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
                    </svg>
                </div>
                <h1 class="text-lg sm:text-xl lg:text-2xl font-bold text-white">Welcome Back, Explorer!</h1>
                <p class="text-blue-200 mt-2 text-sm sm:text-base">Sign in to continue your space journey</p>
            </div>

            <form id="loginForm" class="space-y-4 sm:space-y-6">
                <div>
                    <label for="loginIdentifier" class="block text-xs sm:text-sm font-medium text-blue-200 mb-1 sm:mb-2">Username or Email</label>
                    <input type="text" id="loginIdentifier" name="loginIdentifier" required
                        class="w-full px-3 py-2 sm:px-4 sm:py-3 bg-white bg-opacity-90 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-colors text-sm sm:text-base"
                        placeholder="Enter your username or email">
                </div>

                <div>
                    <label for="loginPassword" class="block text-xs sm:text-sm font-medium text-blue-200 mb-1 sm:mb-2">Password</label>
                    <div class="relative">
                        <input type="password" id="loginPassword" name="loginPassword" required
                            class="w-full px-3 py-2 sm:px-4 sm:py-3 pr-10 bg-white bg-opacity-90 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-colors text-sm sm:text-base"
                            placeholder="Enter your password">
                        <button type="button" onclick="togglePasswordVisibility('loginPassword')" 
                            class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700">
                            <svg id="loginPasswordEyeIcon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <button type="submit"
                    class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 sm:py-3 px-4 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 transition-all duration-300 shadow-lg text-sm sm:text-base">
                    🚀 Sign In
                </button>
            </form>

            <!-- Divider -->
            <div class="my-6 flex items-center">
                <div class="flex-1 border-t border-blue-300 border-opacity-30"></div>
                <span class="px-4 text-blue-200 text-sm">or</span>
                <div class="flex-1 border-t border-blue-300 border-opacity-30"></div>
            </div>

            <!-- Sign Up Button -->
            <button onclick="goToSignUp()" 
                class="w-full bg-gradient-to-r from-green-500 to-teal-600 text-white py-2 sm:py-3 px-4 rounded-lg font-medium hover:from-green-600 hover:to-teal-700 focus:ring-2 focus:ring-green-400 focus:ring-offset-2 transition-all duration-300 shadow-lg text-sm sm:text-base">
                ✨ Create New Account
            </button>

            <!-- Forgot Password -->
            <div class="text-center mt-4">
                <a href="#" class="text-blue-300 hover:text-blue-200 text-sm">Forgot your password?</a>
            </div>
        </div>
    </div>

    <!-- Profile Creation Form -->
    <div id="profileSection" class="hidden slide-transition min-h-screen flex items-center justify-center py-4">
        <div class="w-full max-w-md bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900 bg-opacity-90 backdrop-blur-sm rounded-xl shadow-2xl p-4 sm:p-6 lg:p-8 relative z-10 border border-blue-400 border-opacity-30 mx-2 sm:mx-4 lg:mx-auto">
        <!-- Earth in background -->
        <div class="absolute -top-4 -right-4 w-24 h-24 rounded-full bg-gradient-to-br from-blue-400 via-green-400 to-blue-600 opacity-20 animate-pulse"></div>
        
        <!-- Satellite orbit -->
        <div class="absolute top-8 right-8 w-2 h-2 bg-gray-300 rounded-full animate-ping"></div>
        
        <!-- Space station -->
        <div class="absolute bottom-4 left-4 w-3 h-3 bg-yellow-400 rounded-sm opacity-60" style="animation: float 6s ease-in-out infinite;"></div>
        
        <div class="text-center mb-6 sm:mb-8">
            <div class="w-12 h-12 sm:w-16 sm:h-16 bg-indigo-600 rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4">
                <svg class="w-6 h-6 sm:w-8 sm:h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                </svg>
            </div>
            <h1 class="text-lg sm:text-xl lg:text-2xl font-bold text-white">Create Your Profile</h1>
            <p class="text-blue-200 mt-2 text-sm sm:text-base">Join our cosmic community today</p>
        </div>

        <form id="registrationForm" class="space-y-4 sm:space-y-6">
            <div>
                <label for="yourName" class="block text-xs sm:text-sm font-medium text-blue-200 mb-1 sm:mb-2">Your Name</label>
                <input type="text" id="yourName" name="yourName" required
                    class="w-full px-3 py-2 sm:px-4 sm:py-3 bg-white bg-opacity-90 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-colors text-sm sm:text-base"
                    placeholder="Enter your full name">
            </div>

            <div>
                <label for="userName" class="block text-xs sm:text-sm font-medium text-blue-200 mb-1 sm:mb-2">Username</label>
                <input type="text" id="userName" name="userName" required
                    class="w-full px-3 py-2 sm:px-4 sm:py-3 bg-white bg-opacity-90 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-colors text-sm sm:text-base"
                    placeholder="Enter username (a-z, 0-9, _, max 1 uppercase)"
                    pattern="^[a-z0-9_]*[A-Z]?[a-z0-9_]*$"
                    title="Username can contain lowercase letters, numbers, underscores, and at most one uppercase letter">
            </div>

            <div>
                <label for="email" class="block text-xs sm:text-sm font-medium text-blue-200 mb-1 sm:mb-2">Email Address</label>
                <input type="email" id="email" name="email" required
                    class="w-full px-3 py-2 sm:px-4 sm:py-3 bg-white bg-opacity-90 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-colors text-sm sm:text-base"
                    placeholder="Enter your email address">
            </div>



            <div>
                <label for="password" class="block text-xs sm:text-sm font-medium text-blue-200 mb-1 sm:mb-2">Create Password</label>
                <div class="relative">
                    <input type="password" id="password" name="password" required
                        class="w-full px-3 py-2 sm:px-4 sm:py-3 pr-10 bg-white bg-opacity-90 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-colors text-sm sm:text-base"
                        placeholder="Create a secure password"
                        onpaste="return false" oncopy="return false" oncut="return false">
                    <button type="button" onclick="togglePasswordVisibility('password')" 
                        class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700">
                        <svg id="passwordEyeIcon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <div>
                <label for="confirmPassword" class="block text-xs sm:text-sm font-medium text-blue-200 mb-1 sm:mb-2">Confirm Password</label>
                <div class="relative">
                    <input type="password" id="confirmPassword" name="confirmPassword" required
                        class="w-full px-3 py-2 sm:px-4 sm:py-3 pr-10 bg-white bg-opacity-90 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-colors text-sm sm:text-base"
                        placeholder="Confirm your password"
                        onpaste="return false" oncopy="return false" oncut="return false">
                    <button type="button" onclick="togglePasswordVisibility('confirmPassword')" 
                        class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700">
                        <svg id="confirmPasswordEyeIcon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="flex items-start sm:items-center">
                <input type="checkbox" id="terms" name="terms" required
                    class="w-3 h-3 sm:w-4 sm:h-4 text-blue-400 border-blue-300 rounded focus:ring-blue-400 mt-1 sm:mt-0 flex-shrink-0">
                <label for="terms" class="ml-2 sm:ml-3 text-xs sm:text-sm text-blue-200 leading-tight sm:leading-normal">
                    I agree to the <a href="#" class="text-blue-300 hover:text-blue-200 font-medium">Terms of Service</a> and <a href="#" class="text-blue-300 hover:text-blue-200 font-medium">Privacy Policy</a>
                </label>
            </div>

            <button type="submit"
                class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 sm:py-3 px-4 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 transition-all duration-300 shadow-lg text-sm sm:text-base">
                🚀 Create Profile
            </button>
        </form>

        <!-- Success Message (hidden by default) -->
        <div id="successMessage" class="hidden mt-6 p-4 bg-green-50 border border-green-200 rounded-lg">
            <div class="flex items-center">
                <svg class="w-5 h-5 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                <p class="text-green-800 font-medium">Profile created successfully! Launching Mission Control...</p>
            </div>
        </div>
    </div>

    <!-- Username Popup (hidden by default) -->
    <div id="usernamePopup" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
        <div class="bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900 rounded-2xl p-8 max-w-md mx-4 shadow-2xl border border-blue-400 border-opacity-50 transform transition-all duration-500 scale-95 opacity-0">
            <!-- Cosmic decoration -->
            <div class="text-center mb-6">
                <div class="w-24 h-24 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse shadow-lg">
                    <span class="text-5xl font-black">🚀</span>
                </div>
                <h2 class="text-2xl font-bold text-white mb-2">Welcome to Space!</h2>
                <p class="text-blue-200 text-sm">Your cosmic identity has been created</p>
            </div>

            <!-- Username Display -->
            <div class="bg-black bg-opacity-30 rounded-xl p-6 mb-6 border border-blue-500 border-opacity-30">
                <div class="text-center">
                    <p class="text-blue-200 text-sm mb-2">Your Space Explorer Username:</p>
                    <div class="bg-gradient-to-r from-cyan-400 to-purple-400 text-transparent bg-clip-text">
                        <p id="displayUsername" class="text-2xl font-black animate-pulse">space_explorer</p>
                    </div>
                    <div class="flex items-center justify-center mt-3 space-x-2">
                        <span class="text-yellow-400">⭐</span>
                        <p class="text-blue-300 text-xs">Astronaut Rank: Cadet</p>
                        <span class="text-yellow-400">⭐</span>
                    </div>
                </div>
            </div>

            <!-- Mission Brief -->
            <div class="bg-gradient-to-r from-green-900 to-blue-900 bg-opacity-50 rounded-lg p-4 mb-6">
                <h3 class="text-green-400 font-bold text-sm mb-2">🎯 Mission Brief:</h3>
                <p class="text-green-200 text-xs leading-relaxed">
                    Welcome aboard, Space Explorer! Your mission is to learn about space weather and its effects on Earth. 
                    Prepare for an educational journey through the cosmos!
                </p>
            </div>

            <!-- Continue Button -->
            <button onclick="continueToMissionControl()" 
                class="w-full bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 text-white py-3 px-6 rounded-lg font-bold transition-all duration-300 shadow-lg transform hover:scale-105">
                🚀 Continue to Mission Control
            </button>
        </div>
    </div>
    </div>

    <!-- Space Weather Education Slide (hidden by default) -->
    <div id="spaceWeatherSection" class="hidden slide-transition py-4 min-h-screen">
        <div class="w-full max-w-4xl mx-auto bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900 bg-opacity-90 backdrop-blur-sm rounded-xl shadow-2xl p-3 sm:p-6 lg:p-8 relative z-10 border border-blue-400 border-opacity-30 mx-2 sm:mx-4 lg:mx-auto">
            <div class="text-center mb-8">
                <h1 class="text-2xl sm:text-4xl font-bold text-white mb-3">🌟 Space Weather Adventure! 🌍</h1>
                <p class="text-blue-200 text-base sm:text-lg">Learn how our Sun affects Earth!</p>
            </div>
            
            <!-- Space Weather Animation Container -->
            <div class="relative bg-black bg-opacity-30 rounded-xl p-2 sm:p-4 lg:p-8 mb-4 sm:mb-6 overflow-hidden h-64 sm:h-80 lg:h-96">
                <!-- Animated Sun -->
                <div class="absolute left-2 sm:left-8 top-1/2 transform -translate-y-1/2">
                    <div class="sun-face w-16 sm:w-24 h-16 sm:h-24 bg-yellow-400 rounded-full relative animate-pulse">
                        <!-- Sun's face -->
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="text-2xl sm:text-4xl">😊</div>
                        </div>
                        <!-- Sun rays -->
                        <div class="sun-rays absolute inset-0">
                            <div class="ray ray-1"></div>
                            <div class="ray ray-2"></div>
                            <div class="ray ray-3"></div>
                            <div class="ray ray-4"></div>
                            <div class="ray ray-5"></div>
                            <div class="ray ray-6"></div>
                            <div class="ray ray-7"></div>
                            <div class="ray ray-8"></div>
                        </div>
                    </div>
                    <!-- Solar Flares -->
                    <div class="solar-flare absolute top-2 left-20 w-8 h-2 bg-orange-400 rounded-full animate-ping"></div>
                    <div class="solar-flare absolute bottom-2 left-20 w-6 h-2 bg-red-400 rounded-full animate-ping" style="animation-delay: 0.5s;"></div>
                </div>
                
                <!-- Solar Wind Particles -->
                <div class="solar-wind-container absolute left-20 sm:left-32 top-1/2 transform -translate-y-1/2 w-32 sm:w-64 h-2">
                    <div class="solar-particle particle-1"></div>
                    <div class="solar-particle particle-2"></div>
                    <div class="solar-particle particle-3"></div>
                    <div class="solar-particle particle-4"></div>
                    <div class="solar-particle particle-5"></div>
                </div>
                
                <!-- Earth with Magnetic Shield -->
                <div class="absolute right-2 sm:right-16 top-1/2 transform -translate-y-1/2">
                    <!-- Magnetic Shield -->
                    <div class="magnetic-shield w-20 sm:w-32 h-20 sm:h-32 border-2 sm:border-4 border-blue-400 rounded-full animate-pulse opacity-60"></div>
                    <!-- Earth -->
                    <div class="earth-face absolute inset-2 sm:inset-4 w-16 sm:w-24 h-16 sm:h-24 bg-gradient-to-br from-blue-500 via-green-500 to-blue-600 rounded-full flex items-center justify-center">
                        <div class="text-lg sm:text-2xl">😮</div>
                    </div>
                    <!-- Auroras -->
                    <div class="aurora aurora-north absolute -top-1 sm:-top-2 left-1/2 transform -translate-x-1/2 w-10 sm:w-16 h-4 sm:h-8 bg-gradient-to-r from-green-400 to-purple-500 rounded-full opacity-70 animate-bounce"></div>
                    <div class="aurora aurora-south absolute -bottom-1 sm:-bottom-2 left-1/2 transform -translate-x-1/2 w-10 sm:w-16 h-4 sm:h-8 bg-gradient-to-r from-purple-400 to-green-500 rounded-full opacity-70 animate-bounce" style="animation-delay: 0.3s;"></div>
                </div>
                
                <!-- Interactive Labels -->
                <button onclick="showInfo('solarFlares')" class="absolute left-1 sm:left-4 top-2 sm:top-4 bg-yellow-100 hover:bg-yellow-200 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-bold text-yellow-800 animate-bounce cursor-pointer transition-colors">
                    ☀️ <span class="hidden sm:inline">Solar Flares</span>
                </button>
                <button onclick="showInfo('solarWind')" class="absolute left-1/2 top-2 sm:top-8 transform -translate-x-1/2 bg-orange-100 hover:bg-orange-200 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-bold text-orange-800 animate-bounce cursor-pointer transition-colors" style="animation-delay: 0.5s;">
                    💨 <span class="hidden sm:inline">Solar Wind</span>
                </button>
                <button onclick="showInfo('magneticShield')" class="absolute right-1 sm:right-4 top-2 sm:top-4 bg-blue-100 hover:bg-blue-200 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-bold text-blue-800 animate-bounce cursor-pointer transition-colors" style="animation-delay: 1s;">
                    🛡️ <span class="hidden sm:inline">Magnetic Shield</span>
                </button>
                <button onclick="showInfo('auroras')" class="absolute right-1 sm:right-4 bottom-2 sm:bottom-4 bg-green-100 hover:bg-green-200 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-bold text-green-800 animate-bounce cursor-pointer transition-colors" style="animation-delay: 1.5s;">
                    ✨ <span class="hidden sm:inline">Auroras</span>
                </button>
                
                <!-- Rocket Launch Button -->
                <button onclick="launchToCategories()" class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-red-100 hover:bg-red-200 px-4 py-3 rounded-full text-sm font-bold text-red-800 cursor-pointer transition-all duration-300 hover:scale-110 group shadow-lg border-2 border-red-300">
                    <div class="flex items-center space-x-2">
                        <span class="text-lg">🚀</span>
                        <span class="text-sm">Get Started</span>
                    </div>
                </button>
            </div>
            
            <!-- Educational Content -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8">
                <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400">
                    <h3 class="text-lg font-bold text-yellow-800 mb-2">☀️ What is Space Weather?</h3>
                    <p class="text-yellow-700 text-sm">Space weather happens when our Sun sends out energy and particles into space. Just like Earth has weather with rain and wind, space has weather too!</p>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-400">
                    <h3 class="text-lg font-bold text-blue-800 mb-2">🛡️ Earth's Protection</h3>
                    <p class="text-blue-700 text-sm">Earth has an invisible magnetic shield that protects us from most space weather. It's like a superhero force field around our planet!</p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-800 mb-2">✨ Beautiful Auroras</h3>
                    <p class="text-green-700 text-sm">When some particles do get through, they create beautiful lights in the sky called auroras - like nature's own light show!</p>
                </div>
                <div class="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-400">
                    <h3 class="text-lg font-bold text-purple-800 mb-2">🚀 Why It Matters</h3>
                    <p class="text-purple-700 text-sm">Understanding space weather helps protect astronauts and satellites in space, just like weather forecasts help us on Earth!</p>
                </div>
            </div>
            
            <!-- Information Popup (hidden by default) -->
            <div id="infoPopup" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white rounded-xl p-6 max-w-md mx-4 shadow-2xl transform transition-all duration-300 scale-95">
                    <div class="flex justify-between items-start mb-4">
                        <h3 id="infoTitle" class="text-xl font-bold text-gray-800"></h3>
                        <button onclick="closeInfo()" class="text-gray-500 hover:text-gray-700 text-2xl font-bold">×</button>
                    </div>
                    <div id="infoContent" class="text-gray-700 mb-4"></div>
                    <div id="infoFacts" class="bg-blue-50 p-3 rounded-lg mb-4"></div>
                    <button onclick="closeInfo()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors">
                        Got it! 👍
                    </button>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex flex-col sm:flex-row justify-between items-center gap-4 sm:gap-0">
                <button onclick="goBackToMissionControl()" 
                    class="w-full sm:w-auto bg-gray-600 hover:bg-gray-700 text-white px-4 sm:px-6 py-3 rounded-lg font-medium transition-colors text-sm sm:text-base">
                    ← Back to Mission Control
                </button>
                <button onclick="continueExploration()" 
                    class="w-full sm:w-auto bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 text-white px-4 sm:px-6 py-3 rounded-lg font-medium transition-all duration-300 shadow-lg text-sm sm:text-base">
                    Continue Exploring! 🚀
                </button>
            </div>
        </div>
    </div>
    </div>

    <!-- General Public Information Page (hidden by default) -->
    <div id="generalPublicSection" class="hidden slide-transition py-4 min-h-screen">
        <div class="w-full max-w-6xl mx-auto bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900 bg-opacity-90 backdrop-blur-sm rounded-xl shadow-2xl p-3 sm:p-6 lg:p-8 relative z-10 border border-blue-400 border-opacity-30 mx-2 sm:mx-4 lg:mx-auto">
            <div class="text-center mb-8">
                <h1 class="text-2xl sm:text-4xl font-bold text-white mb-3">🌌 Space Weather Adventure Levels! 🚀</h1>
                <p class="text-blue-200 text-base sm:text-lg">Complete each level to become a Space Weather Expert!</p>
                <div class="mt-4 flex justify-center items-center space-x-2">
                    <span class="text-yellow-400 text-sm">Progress:</span>
                    <div id="progressStars" class="flex space-x-1">
                        <span class="text-gray-400">⭐</span>
                        <span class="text-gray-400">⭐</span>
                        <span class="text-gray-400">⭐</span>
                        <span class="text-gray-400">⭐</span>
                        <span class="text-gray-400">⭐</span>
                    </div>
                </div>
            </div>
            
            <!-- Solar System Level Map -->
            <div class="relative mb-8 min-h-[500px] sm:min-h-[600px] overflow-hidden">
                <!-- Central Sun -->
                <div class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20">
                    <div class="w-20 h-20 sm:w-28 sm:h-28 bg-gradient-to-br from-yellow-300 via-orange-400 to-red-500 rounded-full relative animate-pulse shadow-2xl">
                        <!-- Sun's face -->
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="text-3xl sm:text-5xl">☀️</div>
                        </div>
                        <!-- Sun rays -->
                        <div class="sun-rays absolute inset-0">
                            <div class="ray ray-1"></div>
                            <div class="ray ray-2"></div>
                            <div class="ray ray-3"></div>
                            <div class="ray ray-4"></div>
                            <div class="ray ray-5"></div>
                            <div class="ray ray-6"></div>
                            <div class="ray ray-7"></div>
                            <div class="ray ray-8"></div>
                        </div>
                        <!-- Central label -->
                        <div class="absolute -bottom-8 left-1/2 transform -translate-x-1/2">
                            <div class="text-white text-xs sm:text-sm font-bold text-center">Space Weather<br>Central</div>
                        </div>
                    </div>
                </div>

                <!-- Orbital Rings (Visual Guide) -->
                <div class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2">
                    <!-- Level 1 Orbit -->
                    <div class="w-40 h-40 sm:w-52 sm:h-52 border border-green-400 border-opacity-30 rounded-full"></div>
                </div>
                <div class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2">
                    <!-- Level 2 Orbit -->
                    <div class="w-56 h-56 sm:w-72 sm:h-72 border border-purple-400 border-opacity-30 rounded-full"></div>
                </div>
                <div class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2">
                    <!-- Level 3 Orbit -->
                    <div class="w-72 h-72 sm:w-92 sm:h-92 border border-yellow-400 border-opacity-30 rounded-full"></div>
                </div>
                <div class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2">
                    <!-- Level 4 Orbit -->
                    <div class="w-88 h-88 sm:w-112 sm:h-112 border border-pink-400 border-opacity-30 rounded-full"></div>
                </div>
                <div class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2">
                    <!-- Challenge Level Orbit -->
                    <div class="w-104 h-104 sm:w-128 sm:h-128 border border-red-400 border-opacity-30 rounded-full animate-pulse"></div>
                </div>

                <!-- Level 1 - Top position -->
                <div class="absolute left-1/2 top-16 transform -translate-x-1/2">
                    <div class="level-planet relative">
                        <div class="flex flex-col items-center">
                            <button id="level1" onclick="openLevel(1)" class="level-btn relative w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gradient-to-br from-green-400 to-green-600 hover:from-green-500 hover:to-green-700 shadow-lg transform hover:scale-110 transition-all duration-300 border-4 border-white z-10">
                                <div class="text-xl sm:text-2xl">📱</div>
                                <div class="level-stars absolute -top-4 left-1/2 transform -translate-x-1/2 hidden">
                                    <span class="text-yellow-400 text-xs">⭐</span>
                                </div>
                            </button>
                            <div class="mt-2 text-white text-xs font-bold">Level 1</div>
                        </div>
                        <!-- Connection Line -->
                        <div class="quiz-connection absolute top-1/2 left-full w-8 sm:w-12 transform -translate-y-1/2"></div>
                        <!-- Connected Quiz Button -->
                        <button onclick="openLevelQuizDirect(1)" class="absolute top-1/2 left-full ml-8 sm:ml-12 transform -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 bg-purple-500 hover:bg-purple-600 rounded-full shadow-lg hover:scale-110 transition-all duration-300 border-2 border-white z-20">
                            <div class="text-xs sm:text-sm">📝</div>
                        </button>
                    </div>
                </div>

                <!-- Level 2 - Top right position -->
                <div class="absolute right-16 top-1/4 transform -translate-y-1/2">
                    <div class="level-orbit-2">
                        <div class="level-planet relative">
                            <div class="flex flex-col items-center">
                                <button id="level2" onclick="openLevel(2)" class="level-btn relative w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gradient-to-br from-purple-400 to-purple-600 hover:from-purple-500 hover:to-purple-700 shadow-lg transform hover:scale-110 transition-all duration-300 border-4 border-gray-400 opacity-50 cursor-not-allowed z-10">
                                    <div class="text-xl sm:text-2xl">📡</div>
                                    <div class="level-stars absolute -top-4 left-1/2 transform -translate-x-1/2 hidden">
                                        <span class="text-yellow-400 text-xs">⭐</span>
                                    </div>
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <div class="w-5 h-5 bg-gray-600 rounded-full flex items-center justify-center">
                                            <span class="text-white text-xs">🔒</span>
                                        </div>
                                    </div>
                                </button>
                                <div class="mt-2 text-white text-xs font-bold">Level 2</div>
                            </div>
                            <!-- Connection Line -->
                            <div class="quiz-connection absolute top-1/2 right-full w-8 sm:w-12 transform -translate-y-1/2"></div>
                            <!-- Connected Quiz Button -->
                            <button onclick="openLevelQuizDirect(2)" class="absolute top-1/2 right-full mr-8 sm:mr-12 transform -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 bg-purple-500 hover:bg-purple-600 rounded-full shadow-lg hover:scale-110 transition-all duration-300 border-2 border-white z-20">
                                <div class="text-xs sm:text-sm">📝</div>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Level 3 - Bottom right position -->
                <div class="absolute right-16 bottom-1/4 transform translate-y-1/2">
                    <div class="level-orbit-3">
                        <div class="level-planet relative">
                            <div class="flex flex-col items-center">
                                <button id="level3" onclick="openLevel(3)" class="level-btn relative w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 shadow-lg transform hover:scale-110 transition-all duration-300 border-4 border-gray-400 opacity-50 cursor-not-allowed z-10">
                                    <div class="text-xl sm:text-2xl">💡</div>
                                    <div class="level-stars absolute -top-4 left-1/2 transform -translate-x-1/2 hidden">
                                        <span class="text-yellow-400 text-xs">⭐</span>
                                    </div>
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <div class="w-5 h-5 bg-gray-600 rounded-full flex items-center justify-center">
                                            <span class="text-white text-xs">🔒</span>
                                        </div>
                                    </div>
                                </button>
                                <div class="mt-2 text-white text-xs font-bold">Level 3</div>
                            </div>
                            <!-- Connection Line -->
                            <div class="quiz-connection absolute top-1/2 right-full w-8 sm:w-12 transform -translate-y-1/2"></div>
                            <!-- Connected Quiz Button -->
                            <button onclick="openLevelQuizDirect(3)" class="absolute top-1/2 right-full mr-8 sm:mr-12 transform -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 bg-purple-500 hover:bg-purple-600 rounded-full shadow-lg hover:scale-110 transition-all duration-300 border-2 border-white z-20">
                                <div class="text-xs sm:text-sm">📝</div>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Level 4 - Bottom left position -->
                <div class="absolute left-16 bottom-1/4 transform translate-y-1/2">
                    <div class="level-orbit-4">
                        <div class="level-planet relative">
                            <div class="flex flex-col items-center">
                                <button id="level4" onclick="openLevel(4)" class="level-btn relative w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gradient-to-br from-pink-400 to-pink-600 hover:from-pink-500 hover:to-pink-700 shadow-lg transform hover:scale-110 transition-all duration-300 border-4 border-gray-400 opacity-50 cursor-not-allowed z-10">
                                    <div class="text-xl sm:text-2xl">✨</div>
                                    <div class="level-stars absolute -top-4 left-1/2 transform -translate-x-1/2 hidden">
                                        <span class="text-yellow-400 text-xs">⭐</span>
                                    </div>
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <div class="w-5 h-5 bg-gray-600 rounded-full flex items-center justify-center">
                                            <span class="text-white text-xs">🔒</span>
                                        </div>
                                    </div>
                                </button>
                                <div class="mt-2 text-white text-xs font-bold">Level 4</div>
                            </div>
                            <!-- Connection Line -->
                            <div class="quiz-connection absolute top-1/2 left-full w-8 sm:w-12 transform -translate-y-1/2"></div>
                            <!-- Connected Quiz Button -->
                            <button onclick="openLevelQuizDirect(4)" class="absolute top-1/2 left-full ml-8 sm:ml-12 transform -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 bg-purple-500 hover:bg-purple-600 rounded-full shadow-lg hover:scale-110 transition-all duration-300 border-2 border-white z-20">
                                <div class="text-xs sm:text-sm">📝</div>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Challenge Level - Top left position -->
                <div class="absolute left-16 top-1/4 transform -translate-y-1/2">
                    <div class="level-orbit-5">
                        <div class="level-planet">
                            <div class="flex flex-col items-center">
                                <button id="level5" onclick="openLevel(5)" class="level-btn relative w-18 h-18 sm:w-22 sm:h-22 rounded-full bg-gradient-to-br from-red-500 to-purple-600 hover:from-red-600 hover:to-purple-700 shadow-lg transform hover:scale-110 transition-all duration-300 border-4 border-gray-400 opacity-50 cursor-not-allowed animate-pulse z-10">
                                    <div class="text-xl sm:text-2xl">🏆</div>
                                    <div class="level-stars absolute -top-4 left-1/2 transform -translate-x-1/2 hidden">
                                        <span class="text-yellow-400 text-xs">⭐⭐⭐</span>
                                    </div>
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <div class="w-5 h-5 bg-gray-600 rounded-full flex items-center justify-center">
                                            <span class="text-white text-xs">🔒</span>
                                        </div>
                                    </div>
                                </button>
                                <div class="mt-2 text-white text-xs font-bold">Challenge</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Floating space elements -->
                <div class="absolute top-8 left-8 text-2xl opacity-30 animate-pulse">🌟</div>
                <div class="absolute top-12 right-12 text-xl opacity-40 animate-bounce" style="animation-delay: 1s;">🚀</div>
                <div class="absolute bottom-16 left-16 text-lg opacity-30 animate-pulse" style="animation-delay: 2s;">⭐</div>
                <div class="absolute bottom-8 right-8 text-xl opacity-35 animate-bounce" style="animation-delay: 0.5s;">🌙</div>
                <div class="absolute top-1/4 left-8 text-sm opacity-25 animate-pulse" style="animation-delay: 3s;">🛸</div>
                <div class="absolute top-3/4 right-16 text-sm opacity-25 animate-bounce" style="animation-delay: 1.5s;">🌌</div>
            </div>

            <!-- Level Content Modal -->
            <div id="levelModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4">
                <div class="bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl border border-blue-400 border-opacity-50">
                    <!-- Level Header -->
                    <div class="text-center mb-6">
                        <div id="levelIcon" class="text-6xl mb-4">📱</div>
                        <h2 id="levelTitle" class="text-2xl font-bold text-white mb-2">Level 1: Your Phone's GPS</h2>
                        <p class="text-blue-200">Learn how space weather affects your daily tech!</p>
                    </div>
                    
                    <!-- Level Content -->
                    <div id="levelContent" class="bg-black bg-opacity-30 rounded-xl p-6 mb-6">
                        <!-- Content will be dynamically loaded -->
                    </div>
                    
                    <!-- Level Actions -->
                    <div class="flex justify-between items-center">
                        <button onclick="closeLevelModal()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors">
                            Close
                        </button>
                        <button id="completeLevel" onclick="completeLevel()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-bold transition-colors">
                            Complete Level! 🚀
                        </button>
                    </div>
                </div>
            </div>

            <!-- Level Quiz Modal -->
            <div id="levelQuizModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4">
                <div class="bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl border border-purple-400 border-opacity-50">
                    <!-- Quiz Header -->
                    <div class="text-center mb-6">
                        <div id="levelQuizIcon" class="text-6xl mb-4">📝</div>
                        <h2 id="levelQuizTitle" class="text-2xl font-bold text-white mb-2">Level Quiz</h2>
                        <p class="text-purple-200">Test what you learned!</p>
                        <div class="mt-4">
                            <span class="text-yellow-400">Question <span id="currentLevelQuestion">1</span> of 2</span>
                        </div>
                    </div>
                    
                    <!-- Quiz Content -->
                    <div id="levelQuizContent" class="bg-black bg-opacity-30 rounded-xl p-6 mb-6">
                        <!-- Quiz questions will be loaded here -->
                    </div>
                    
                    <!-- Quiz Actions -->
                    <div class="flex justify-between items-center">
                        <button onclick="closeLevelQuizModal()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors">
                            Close
                        </button>
                        <div id="levelQuizActions">
                            <!-- Quiz action buttons will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Final Challenge Quiz Modal -->
            <div id="quizModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4">
                <div class="bg-gradient-to-br from-purple-900 via-pink-900 to-red-900 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl border border-pink-400 border-opacity-50">
                    <!-- Quiz Header -->
                    <div class="text-center mb-6">
                        <div class="text-6xl mb-4">🏆</div>
                        <h2 class="text-2xl font-bold text-white mb-2">Space Weather Challenge!</h2>
                        <p class="text-pink-200">Test your knowledge and earn stars!</p>
                        <div class="mt-4">
                            <span class="text-yellow-400">Question <span id="currentQuestion">1</span> of 5</span>
                        </div>
                    </div>
                    
                    <!-- Quiz Content -->
                    <div id="quizContent" class="bg-black bg-opacity-30 rounded-xl p-6 mb-6">
                        <!-- Quiz questions will be loaded here -->
                    </div>
                    
                    <!-- Quiz Actions -->
                    <div class="flex justify-between items-center">
                        <button onclick="closeQuizModal()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors">
                            Close
                        </button>
                        <div id="quizActions">
                            <!-- Quiz action buttons will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reward Modal -->
            <div id="rewardModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4">
                <div class="bg-gradient-to-br from-yellow-400 via-orange-500 to-red-500 rounded-2xl p-8 max-w-md w-full shadow-2xl border border-yellow-300 transform transition-all duration-500">
                    <div class="text-center">
                        <div id="rewardAnimation" class="text-8xl mb-4 animate-bounce">🎉</div>
                        <h2 id="rewardTitle" class="text-3xl font-bold text-white mb-4">Congratulations!</h2>
                        <div id="rewardStars" class="text-6xl mb-4">⭐⭐⭐</div>
                        <p id="rewardMessage" class="text-white text-lg mb-6">You're a Space Weather Expert!</p>
                        <button onclick="closeRewardModal()" class="bg-white text-orange-600 px-6 py-3 rounded-lg font-bold hover:bg-gray-100 transition-colors">
                            Continue Adventure! 🚀
                        </button>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex flex-col sm:flex-row justify-between items-center gap-4 sm:gap-0">
                <button onclick="goBackToCategories()" 
                    class="w-full sm:w-auto bg-gray-600 hover:bg-gray-700 text-white px-4 sm:px-6 py-3 rounded-lg font-medium transition-colors text-sm sm:text-base">
                    ← Back to Categories
                </button>
                <button onclick="exploreMoreCategories()" 
                    class="w-full sm:w-auto bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white px-4 sm:px-6 py-3 rounded-lg font-medium transition-all duration-300 shadow-lg text-sm sm:text-base">
                    Explore More Categories! 🚀
                </button>
            </div>
        </div>
    </div>
    </div>

    <!-- Categories Selection Page (hidden by default) -->
    <div id="categoriesSection" class="hidden slide-transition py-4 min-h-screen">
        <div class="w-full max-w-6xl mx-auto bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900 bg-opacity-90 backdrop-blur-sm rounded-xl shadow-2xl p-3 sm:p-6 lg:p-8 relative z-10 border border-blue-400 border-opacity-30 mx-2 sm:mx-4 lg:mx-auto">
            <!-- Logout Button -->
            <div class="absolute top-4 right-4 z-20">
                <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white px-3 py-2 sm:px-4 sm:py-2 rounded-lg font-medium transition-colors text-xs sm:text-sm flex items-center space-x-1 sm:space-x-2 shadow-lg">
                    <svg class="w-3 h-3 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
                    </svg>
                    <span class="hidden sm:inline">Logout</span>
                </button>
            </div>
            
            <div class="text-center mb-8">
                <h1 class="text-2xl sm:text-4xl font-bold text-white mb-3">🌌 Choose Your Space Mission! 🚀</h1>
                <p class="text-blue-200 text-base sm:text-lg">Select a category to explore space weather impacts</p>
            </div>
            
            <!-- Categories Grid -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6 mb-6 sm:mb-8">
                <!-- General Public -->
                <div class="relative group">
                    <button onclick="selectCategory('general')" class="category-btn w-full bg-gradient-to-br from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white p-3 sm:p-4 lg:p-6 rounded-xl shadow-lg transition-all duration-300 transform hover:scale-105 hover:shadow-2xl">
                        <div class="text-2xl sm:text-3xl lg:text-4xl mb-2 sm:mb-3">👥</div>
                        <h3 class="text-base sm:text-lg lg:text-xl font-bold mb-1 sm:mb-2">General Public</h3>
                        <p class="text-blue-100 text-xs sm:text-sm">Learn how space weather affects everyday life on Earth</p>
                    </button>
                    <div class="category-rocket hidden absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10">
                        <div class="w-8 h-16 relative">
                            <svg viewBox="0 0 30 60" class="w-full h-full">
                                <ellipse cx="15" cy="42" rx="6" ry="12" fill="#e5e7eb"/>
                                <path d="M9 30 L15 10 L21 30 Z" fill="#dc2626"/>
                                <path d="M9 47 L5 55 L9 52 Z" fill="#374151"/>
                                <path d="M21 47 L25 55 L21 52 Z" fill="#374151"/>
                                <circle cx="15" cy="35" r="3" fill="#3b82f6"/>
                            </svg>
                            <div class="rocket-flame-small absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3 h-4 bg-gradient-to-t from-yellow-400 to-orange-500 rounded-full opacity-0"></div>
                        </div>
                    </div>
                </div>

                <!-- Astronaut -->
                <div class="relative group">
                    <button onclick="selectCategory('astronaut')" class="category-btn w-full bg-gradient-to-br from-purple-500 to-purple-700 hover:from-purple-600 hover:to-purple-800 text-white p-6 rounded-xl shadow-lg transition-all duration-300 transform hover:scale-105 hover:shadow-2xl">
                        <div class="text-4xl mb-3">👨‍🚀</div>
                        <h3 class="text-xl font-bold mb-2">Astronaut</h3>
                        <p class="text-purple-100 text-sm">Discover space weather dangers for space travelers</p>
                    </button>
                    <div class="category-rocket hidden absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10">
                        <div class="w-8 h-16 relative">
                            <svg viewBox="0 0 30 60" class="w-full h-full">
                                <ellipse cx="15" cy="42" rx="6" ry="12" fill="#e5e7eb"/>
                                <path d="M9 30 L15 10 L21 30 Z" fill="#dc2626"/>
                                <path d="M9 47 L5 55 L9 52 Z" fill="#374151"/>
                                <path d="M21 47 L25 55 L21 52 Z" fill="#374151"/>
                                <circle cx="15" cy="35" r="3" fill="#3b82f6"/>
                            </svg>
                            <div class="rocket-flame-small absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3 h-4 bg-gradient-to-t from-yellow-400 to-orange-500 rounded-full opacity-0"></div>
                        </div>
                    </div>
                </div>

                <!-- Farmers -->
                <div class="relative group">
                    <button onclick="selectCategory('farmers')" class="category-btn w-full bg-gradient-to-br from-green-500 to-green-700 hover:from-green-600 hover:to-green-800 text-white p-6 rounded-xl shadow-lg transition-all duration-300 transform hover:scale-105 hover:shadow-2xl">
                        <div class="text-4xl mb-3">👨‍🌾</div>
                        <h3 class="text-xl font-bold mb-2">Farmers</h3>
                        <p class="text-green-100 text-sm">Explore how space weather impacts agriculture</p>
                    </button>
                    <div class="category-rocket hidden absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10">
                        <div class="w-8 h-16 relative">
                            <svg viewBox="0 0 30 60" class="w-full h-full">
                                <ellipse cx="15" cy="42" rx="6" ry="12" fill="#e5e7eb"/>
                                <path d="M9 30 L15 10 L21 30 Z" fill="#dc2626"/>
                                <path d="M9 47 L5 55 L9 52 Z" fill="#374151"/>
                                <path d="M21 47 L25 55 L21 52 Z" fill="#374151"/>
                                <circle cx="15" cy="35" r="3" fill="#3b82f6"/>
                            </svg>
                            <div class="rocket-flame-small absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3 h-4 bg-gradient-to-t from-yellow-400 to-orange-500 rounded-full opacity-0"></div>
                        </div>
                    </div>
                </div>

                <!-- Sun -->
                <div class="relative group">
                    <button onclick="selectCategory('sun')" class="category-btn w-full bg-gradient-to-br from-yellow-500 to-orange-600 hover:from-yellow-600 hover:to-orange-700 text-white p-6 rounded-xl shadow-lg transition-all duration-300 transform hover:scale-105 hover:shadow-2xl">
                        <div class="text-4xl mb-3">☀️</div>
                        <h3 class="text-xl font-bold mb-2">Sun</h3>
                        <p class="text-yellow-100 text-sm">Learn about our star and its powerful activities</p>
                    </button>
                    <div class="category-rocket hidden absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10">
                        <div class="w-8 h-16 relative">
                            <svg viewBox="0 0 30 60" class="w-full h-full">
                                <ellipse cx="15" cy="42" rx="6" ry="12" fill="#e5e7eb"/>
                                <path d="M9 30 L15 10 L21 30 Z" fill="#dc2626"/>
                                <path d="M9 47 L5 55 L9 52 Z" fill="#374151"/>
                                <path d="M21 47 L25 55 L21 52 Z" fill="#374151"/>
                                <circle cx="15" cy="35" r="3" fill="#3b82f6"/>
                            </svg>
                            <div class="rocket-flame-small absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3 h-4 bg-gradient-to-t from-yellow-400 to-orange-500 rounded-full opacity-0"></div>
                        </div>
                    </div>
                </div>

                <!-- Moon -->
                <div class="relative group">
                    <button onclick="selectCategory('moon')" class="category-btn w-full bg-gradient-to-br from-gray-500 to-gray-700 hover:from-gray-600 hover:to-gray-800 text-white p-6 rounded-xl shadow-lg transition-all duration-300 transform hover:scale-105 hover:shadow-2xl">
                        <div class="text-4xl mb-3">🌙</div>
                        <h3 class="text-xl font-bold mb-2">Moon</h3>
                        <p class="text-gray-100 text-sm">Discover how space weather affects our lunar neighbor</p>
                    </button>
                    <div class="category-rocket hidden absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10">
                        <div class="w-8 h-16 relative">
                            <svg viewBox="0 0 30 60" class="w-full h-full">
                                <ellipse cx="15" cy="42" rx="6" ry="12" fill="#e5e7eb"/>
                                <path d="M9 30 L15 10 L21 30 Z" fill="#dc2626"/>
                                <path d="M9 47 L5 55 L9 52 Z" fill="#374151"/>
                                <path d="M21 47 L25 55 L21 52 Z" fill="#374151"/>
                                <circle cx="15" cy="35" r="3" fill="#3b82f6"/>
                            </svg>
                            <div class="rocket-flame-small absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3 h-4 bg-gradient-to-t from-yellow-400 to-orange-500 rounded-full opacity-0"></div>
                        </div>
                    </div>
                </div>

                <!-- Space Rover -->
                <div class="relative group">
                    <button onclick="selectCategory('rover')" class="category-btn w-full bg-gradient-to-br from-cyan-500 to-cyan-700 hover:from-cyan-600 hover:to-cyan-800 text-white p-6 rounded-xl shadow-lg transition-all duration-300 transform hover:scale-105 hover:shadow-2xl">
                        <div class="text-4xl mb-3">🤖</div>
                        <h3 class="text-xl font-bold mb-2">Space Rover</h3>
                        <p class="text-cyan-100 text-sm">Discover how rovers explore planets in space weather</p>
                    </button>
                    <div class="category-rocket hidden absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10">
                        <div class="w-8 h-16 relative">
                            <svg viewBox="0 0 30 60" class="w-full h-full">
                                <ellipse cx="15" cy="42" rx="6" ry="12" fill="#e5e7eb"/>
                                <path d="M9 30 L15 10 L21 30 Z" fill="#dc2626"/>
                                <path d="M9 47 L5 55 L9 52 Z" fill="#374151"/>
                                <path d="M21 47 L25 55 L21 52 Z" fill="#374151"/>
                                <circle cx="15" cy="35" r="3" fill="#3b82f6"/>
                            </svg>
                            <div class="rocket-flame-small absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3 h-4 bg-gradient-to-t from-yellow-400 to-orange-500 rounded-full opacity-0"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex justify-center">
                <button onclick="goBackToSpaceWeather()" 
                    class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                    ← Back to Space Weather
                </button>
            </div>
        </div>
    </div>
    </div>

    <!-- Launch Control Panel (hidden by default) -->
    <div id="launchSection" class="hidden slide-transition py-4 min-h-screen flex items-center justify-center">
        <div class="launch-panel w-full max-w-lg mx-auto bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900 bg-opacity-90 backdrop-blur-sm rounded-xl shadow-2xl p-6 sm:p-8 lg:p-12 relative z-10 border border-blue-400 border-opacity-30 mx-2 sm:mx-4 lg:mx-auto">
            <!-- Mission Control Icon -->
            <div class="text-center mb-6 sm:mb-8 lg:mb-10">
                <div class="w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6 animate-pulse">
                    <svg class="w-8 h-8 sm:w-10 sm:h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                </div>
                <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-2 sm:mb-3">Space Explorer</h1>
                <p class="text-blue-200 text-base sm:text-lg">Mission Control Center</p>
                <p class="text-blue-300 text-xs sm:text-sm mt-2">Welcome, <span id="astronautName">Space Explorer</span>!</p>
            </div>

            <!-- Mission Status -->
            <div class="bg-black bg-opacity-30 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8 border border-blue-500 border-opacity-30">
                <div class="flex items-center justify-between mb-3 sm:mb-4">
                    <span class="text-blue-200 text-xs sm:text-sm font-medium">Mission Status:</span>
                    <span class="text-green-400 text-xs sm:text-sm font-bold animate-pulse">● READY</span>
                </div>
                <div class="flex items-center justify-between mb-3 sm:mb-4">
                    <span class="text-blue-200 text-xs sm:text-sm font-medium">Fuel Level:</span>
                    <div class="w-24 sm:w-32 h-2 bg-gray-700 rounded-full overflow-hidden">
                        <div class="w-full h-full bg-gradient-to-r from-green-400 to-blue-500 animate-pulse"></div>
                    </div>
                </div>
                <div class="flex items-center justify-between">
                    <span class="text-blue-200 text-xs sm:text-sm font-medium">Destination:</span>
                    <span class="text-yellow-400 text-xs sm:text-sm font-bold">Solar System Tour</span>
                </div>
            </div>

            <!-- Launch Button -->
            <button onclick="initiateLaunch()" 
                class="launch-button w-full bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 text-white py-3 sm:py-4 px-4 sm:px-6 rounded-lg font-bold text-lg sm:text-xl hover:from-red-600 hover:via-orange-600 hover:to-yellow-600 focus:ring-4 focus:ring-orange-400 focus:ring-offset-2 transition-all duration-300 shadow-lg transform hover:scale-105">
                🚀 LAUNCH MISSION
            </button>

            <!-- Mission Info -->
            <div class="mt-8 text-center">
                <p class="text-blue-200 text-sm">
                    Explore Mars, Jupiter, Saturn, Neptune, and Venus
                </p>
                <p class="text-blue-300 text-xs mt-2">
                    ⭐ Estimated flight time: 2.5 light years
                </p>
            </div>

            <!-- Launch Countdown (hidden by default) -->
            <div id="countdown" class="hidden mt-4 sm:mt-6 text-center">
                <div class="text-4xl sm:text-5xl lg:text-6xl font-bold text-red-400 animate-pulse" id="countdownNumber">3</div>
                <p class="text-blue-200 text-base sm:text-lg mt-2">Launching in...</p>
            </div>
        </div>
    </div>

    <script>
        // Create twinkling stars
        function createStars() {
            const starsContainer = document.querySelector('.stars');
            const numberOfStars = 150;
            
            for (let i = 0; i < numberOfStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                
                // Random position
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                
                // Random size
                const size = Math.random() * 3 + 1;
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                
                // Random animation delay
                star.style.animationDelay = Math.random() * 3 + 's';
                
                starsContainer.appendChild(star);
            }
        }
        
        // Initialize stars when page loads
        createStars();

        // Space terminology for username generation
        const spaceTerms = [
            'Nebula', 'Cosmos', 'Stellar', 'Orbit', 'Galaxy', 'Comet', 'Pulsar', 'Quasar',
            'Nova', 'Meteor', 'Astro', 'Solar', 'Lunar', 'Cosmic', 'Void', 'Star',
            'Planet', 'Rocket', 'Space', 'Ion', 'Plasma', 'Photon', 'Gravity', 'Warp',
            'Fusion', 'Quantum', 'Celestial', 'Infinity', 'Aurora', 'Magnetar'
        ];

        // Generate unique username
        function generateUsername() {
            const adjectives = ['Cosmic', 'Stellar', 'Galactic', 'Nebular', 'Solar', 'Lunar', 'Astro', 'Quantum'];
            const nouns = ['Explorer', 'Voyager', 'Navigator', 'Pioneer', 'Ranger', 'Scout', 'Pilot', 'Commander'];
            
            const randomAdjective = adjectives[Math.floor(Math.random() * adjectives.length)];
            const randomNoun = nouns[Math.floor(Math.random() * nouns.length)];
            const randomNumber = Math.floor(Math.random() * 999) + 1;
            
            return `${randomAdjective}${randomNoun}${randomNumber}`;
        }

        // Login form submission
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            // Simple validation
            if (!data.loginIdentifier || !data.loginPassword) {
                alert('Please fill in all fields.');
                return;
            }
            
            // Simulate login process
            const submitButton = this.querySelector('button[type="submit"]');
            submitButton.textContent = '🚀 Signing In...';
            submitButton.disabled = true;
            
            setTimeout(() => {
                // For demo purposes, accept any login
                // Store current user and astronaut name
                currentUser = data.loginIdentifier;
                document.getElementById('astronautName').textContent = data.loginIdentifier;
                
                // Load saved progress
                loadProgress();
                
                // Go directly to launch screen
                transitionFromLoginToLaunch();
                
                // Reset button
                submitButton.textContent = '🚀 Sign In';
                submitButton.disabled = false;
            }, 1500);
        });

        // Profile form submission
        document.getElementById('registrationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            // Simple validation
            if (!data.yourName || !data.userName || !data.email || !data.password || !data.confirmPassword) {
                alert('Please fill in all required fields.');
                return;
            }
            
            // Username validation - at most one uppercase letter, allow numbers and underscores
            const uppercaseCount = (data.userName.match(/[A-Z]/g) || []).length;
            if (uppercaseCount > 1) {
                alert('Username can contain at most one uppercase letter.');
                return;
            }
            
            // Check if username contains only allowed characters
            const usernameRegex = /^[a-z0-9_]*[A-Z]?[a-z0-9_]*$/;
            if (!usernameRegex.test(data.userName)) {
                alert('Username can only contain lowercase letters, numbers, underscores, and at most one uppercase letter.');
                return;
            }
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(data.email)) {
                alert('Please enter a valid email address.');
                return;
            }
            
            if (data.password.length < 6) {
                alert('Password must be at least 6 characters long.');
                return;
            }
            
            if (data.password !== data.confirmPassword) {
                alert('Passwords do not match. Please try again.');
                return;
            }
            
            if (!data.terms) {
                alert('Please accept the terms and conditions.');
                return;
            }
            
            // Simulate form submission
            const submitButton = this.querySelector('button[type="submit"]');
            submitButton.textContent = '🚀 Creating Profile...';
            submitButton.disabled = true;
            
            setTimeout(() => {
                // Store current user and astronaut name
                currentUser = data.userName;
                document.getElementById('astronautName').textContent = data.yourName;
                
                // Initialize fresh progress for new user
                initializeCompletedLevels();
                
                // Show username popup
                showUsernamePopup();
                
                // Reset button
                submitButton.textContent = '🚀 Create Profile';
                submitButton.disabled = false;
            }, 1500);
        });

        // Show username popup
        function showUsernamePopup() {
            const usernamePopup = document.getElementById('usernamePopup');
            const displayUsername = document.getElementById('displayUsername');
            const popupContent = usernamePopup.querySelector('.bg-gradient-to-br');
            
            // Generate and set username
            displayUsername.textContent = generateUsername();
            
            // Show popup
            usernamePopup.classList.remove('hidden');
            
            // Animate popup entrance
            setTimeout(() => {
                popupContent.classList.remove('scale-95', 'opacity-0');
                popupContent.classList.add('scale-100', 'opacity-100');
            }, 100);
        }

        // Go to sign up page
        function goToSignUp() {
            const loginSection = document.getElementById('loginSection');
            const profileSection = document.getElementById('profileSection');
            
            // Fade out login section
            loginSection.classList.add('fade-out');
            
            setTimeout(() => {
                // Hide login and show profile creation
                loginSection.classList.add('hidden');
                profileSection.classList.remove('hidden');
                
                // Fade in profile section
                setTimeout(() => {
                    profileSection.classList.add('fade-in');
                }, 100);
            }, 500);
        }

        // Transition from login directly to launch
        function transitionFromLoginToLaunch() {
            const loginSection = document.getElementById('loginSection');
            const launchSection = document.getElementById('launchSection');
            const rocket = document.getElementById('animatedRocket');
            
            // Fade out login section
            loginSection.classList.add('fade-out');
            
            setTimeout(() => {
                // Hide login and show launch
                loginSection.classList.add('hidden');
                launchSection.classList.remove('hidden');
                
                // Hide the animated rocket when going to launch from login
                rocket.style.display = 'none';
                
                // Fade in launch section
                setTimeout(() => {
                    launchSection.classList.add('fade-in');
                }, 100);
            }, 500);
        }

        // Continue to mission control from popup
        function continueToMissionControl() {
            const usernamePopup = document.getElementById('usernamePopup');
            const popupContent = usernamePopup.querySelector('.bg-gradient-to-br');
            
            // Animate popup exit
            popupContent.classList.remove('scale-100', 'opacity-100');
            popupContent.classList.add('scale-95', 'opacity-0');
            
            setTimeout(() => {
                // Hide popup
                usernamePopup.classList.add('hidden');
                
                // Transition to launch screen
                transitionToLaunchScreen();
            }, 500);
        }

        // Transition function
        function transitionToLaunchScreen() {
            const profileSection = document.getElementById('profileSection');
            const launchSection = document.getElementById('launchSection');
            const rocket = document.getElementById('animatedRocket');
            
            // Fade out profile section
            profileSection.classList.add('fade-out');
            
            setTimeout(() => {
                // Hide profile and show launch
                profileSection.classList.add('hidden');
                launchSection.classList.remove('hidden');
                
                // Hide the animated rocket when leaving profile page
                rocket.style.display = 'none';
                
                // Fade in launch section
                setTimeout(() => {
                    launchSection.classList.add('fade-in');
                }, 100);
            }, 500);
        }

        // Launch sequence - now goes to space weather education
        function initiateLaunch() {
            const button = document.querySelector('.launch-button');
            const countdown = document.getElementById('countdown');
            const countdownNumber = document.getElementById('countdownNumber');
            
            // Disable button and show countdown
            button.disabled = true;
            button.textContent = '🚀 LAUNCHING...';
            button.classList.add('opacity-50');
            countdown.classList.remove('hidden');
            
            let count = 3;
            const countdownInterval = setInterval(() => {
                countdownNumber.textContent = count;
                count--;
                
                if (count < 0) {
                    clearInterval(countdownInterval);
                    countdownNumber.textContent = 'LIFTOFF!';
                    
                    // Add launch effects
                    document.body.style.animation = 'shake 0.5s ease-in-out';
                    
                    setTimeout(() => {
                        // Transition to space weather education
                        transitionToSpaceWeather();
                        
                        // Reset everything
                        button.disabled = false;
                        button.textContent = '🚀 LAUNCH MISSION';
                        button.classList.remove('opacity-50');
                        countdown.classList.add('hidden');
                        document.body.style.animation = '';
                    }, 2000);
                }
            }, 1000);
        }

        // Transition to space weather education
        function transitionToSpaceWeather() {
            const launchSection = document.getElementById('launchSection');
            const spaceWeatherSection = document.getElementById('spaceWeatherSection');
            
            // Fade out launch section
            launchSection.classList.add('fade-out');
            
            setTimeout(() => {
                // Hide launch and show space weather
                launchSection.classList.add('hidden');
                spaceWeatherSection.classList.remove('hidden');
                
                // Fade in space weather section
                setTimeout(() => {
                    spaceWeatherSection.classList.add('fade-in');
                }, 100);
            }, 500);
        }

        // Go back to mission control
        function goBackToMissionControl() {
            const spaceWeatherSection = document.getElementById('spaceWeatherSection');
            const launchSection = document.getElementById('launchSection');
            
            // Fade out space weather section
            spaceWeatherSection.classList.add('fade-out');
            
            setTimeout(() => {
                // Hide space weather and show launch
                spaceWeatherSection.classList.add('hidden');
                spaceWeatherSection.classList.remove('fade-in');
                launchSection.classList.remove('hidden');
                launchSection.classList.remove('fade-out');
                
                // Keep rocket hidden when going back to mission control
                // (rocket only appears on the first profile page)
                
                // Fade in launch section
                setTimeout(() => {
                    launchSection.classList.add('fade-in');
                }, 100);
            }, 500);
        }

        // Continue exploration
        function continueExploration() {
            alert('🌟 Great job learning about space weather! More cosmic adventures coming soon! 🚀');
        }

        // Launch to categories page
        function launchToCategories() {
            const launchButton = document.querySelector('button[onclick="launchToCategories()"]');
            const rocket = launchButton.querySelector('span');
            
            // Add launch animation to the rocket button
            launchButton.style.animation = 'rocketLaunchUp 2s ease-out forwards';
            
            // Add screen shake effect
            document.body.style.animation = 'shake 0.5s ease-in-out';
            
            setTimeout(() => {
                // Transition to categories page
                transitionToCategories();
                
                // Reset animations
                launchButton.style.animation = '';
                document.body.style.animation = '';
            }, 2000);
        }

        // Transition to categories page
        function transitionToCategories() {
            const spaceWeatherSection = document.getElementById('spaceWeatherSection');
            const categoriesSection = document.getElementById('categoriesSection');
            
            // Fade out space weather section
            spaceWeatherSection.classList.add('fade-out');
            
            setTimeout(() => {
                // Hide space weather and show categories
                spaceWeatherSection.classList.add('hidden');
                categoriesSection.classList.remove('hidden');
                
                // Fade in categories section
                setTimeout(() => {
                    categoriesSection.classList.add('fade-in');
                }, 100);
            }, 500);
        }

        // Go back to space weather from categories
        function goBackToSpaceWeather() {
            const categoriesSection = document.getElementById('categoriesSection');
            const spaceWeatherSection = document.getElementById('spaceWeatherSection');
            
            // Fade out categories section
            categoriesSection.classList.add('fade-out');
            
            setTimeout(() => {
                // Hide categories and show space weather
                categoriesSection.classList.add('hidden');
                categoriesSection.classList.remove('fade-in');
                spaceWeatherSection.classList.remove('hidden');
                spaceWeatherSection.classList.remove('fade-out');
                
                // Fade in space weather section
                setTimeout(() => {
                    spaceWeatherSection.classList.add('fade-in');
                }, 100);
            }, 500);
        }

        // Select category with rocket animation
        function selectCategory(category) {
            const categoryButton = document.querySelector(`button[onclick="selectCategory('${category}')"]`);
            const categoryContainer = categoryButton.parentElement;
            const rocket = categoryContainer.querySelector('.category-rocket');
            const flame = rocket.querySelector('.rocket-flame-small');
            
            // Set current category and save progress
            currentCategory = category;
            saveProgress();
            
            // Show and animate the rocket
            rocket.classList.remove('hidden');
            flame.classList.add('ignited');
            
            // Add launch animation
            setTimeout(() => {
                rocket.style.animation = 'categoryRocketLaunch 2s ease-out forwards';
                
                // Add screen shake
                document.body.style.animation = 'shake 0.5s ease-in-out';
                
                setTimeout(() => {
                    // Show the category-specific level page
                    transitionToGeneralPublic();
                    
                    // Update the page title and content for the selected category
                    updateCategoryContent(category);
                    
                    // Reset rocket
                    rocket.classList.add('hidden');
                    rocket.style.animation = '';
                    flame.classList.remove('ignited');
                    document.body.style.animation = '';
                }, 2000);
            }, 300);
        }

        // Update category content
        function updateCategoryContent(category) {
            const categoryTitles = {
                general: '🌌 Space Weather Adventure Levels! 🚀',
                astronaut: '👨‍🚀 Astronaut Space Weather Training! 🚀',
                farmers: '🚜 Farm Technology & Space Weather! 🌾',
                sun: '☀️ Solar Activity & Space Weather! 🔥',
                moon: '🌙 Lunar Exploration Challenges! 🚀',
                rover: '🤖 Mars Rover Space Weather Survival! 🔴'
            };

            const categoryDescriptions = {
                general: 'Complete each level to become a Space Weather Expert!',
                astronaut: 'Learn how space weather affects astronauts and spacecraft!',
                farmers: 'Discover how space weather impacts modern agriculture!',
                sun: 'Explore our star and its powerful space weather effects!',
                moon: 'Understand space weather challenges for lunar missions!',
                rover: 'Master space weather survival for Mars exploration!'
            };

            // Update page title and description
            const titleElement = document.querySelector('#generalPublicSection h1');
            const descElement = document.querySelector('#generalPublicSection p');
            
            if (titleElement) titleElement.textContent = categoryTitles[category];
            if (descElement) descElement.textContent = categoryDescriptions[category];

            // Reset level states for new category and restore progress
            resetLevelStates();
            restoreProgressForCategory(category);
            updateProgressStars();
        }

        // Restore progress for specific category
        function restoreProgressForCategory(category) {
            const completed = completedLevels[category] || [];
            completed.forEach(levelNum => {
                const levelBtn = document.getElementById(`level${levelNum}`);
                if (levelBtn) {
                    levelBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                    levelBtn.classList.add('border-yellow-400');
                    levelBtn.querySelector('.level-stars').classList.remove('hidden');
                    
                    // Unlock next level
                    if (levelNum < 5) {
                        const nextLevelBtn = document.getElementById(`level${levelNum + 1}`);
                        if (nextLevelBtn) {
                            nextLevelBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                            nextLevelBtn.classList.add('border-white');
                            const lockIcon = nextLevelBtn.querySelector('.absolute.inset-0');
                            if (lockIcon) lockIcon.classList.add('hidden');
                        }
                    }
                }
            });
        }

        // Reset level states for category switch
        function resetLevelStates() {
            // Reset all level buttons to locked state except level 1
            for (let i = 1; i <= 5; i++) {
                const levelBtn = document.getElementById(`level${i}`);
                if (levelBtn) {
                    if (i === 1) {
                        // Level 1 is always unlocked
                        levelBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                        levelBtn.classList.add('border-white');
                        const lockIcon = levelBtn.querySelector('.absolute.inset-0');
                        if (lockIcon) lockIcon.classList.add('hidden');
                    } else {
                        // Lock other levels
                        levelBtn.classList.add('opacity-50', 'cursor-not-allowed');
                        levelBtn.classList.remove('border-white', 'border-yellow-400');
                        levelBtn.classList.add('border-gray-400');
                        const lockIcon = levelBtn.querySelector('.absolute.inset-0');
                        if (lockIcon) lockIcon.classList.remove('hidden');
                    }
                    
                    // Hide stars
                    const stars = levelBtn.querySelector('.level-stars');
                    if (stars) stars.classList.add('hidden');
                }
            }

            // Update based on completed levels for current category
            const completed = completedLevels[currentCategory] || [];
            completed.forEach(levelNum => {
                const levelBtn = document.getElementById(`level${levelNum}`);
                if (levelBtn) {
                    levelBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                    levelBtn.classList.add('border-yellow-400');
                    levelBtn.querySelector('.level-stars').classList.remove('hidden');
                    
                    // Unlock next level
                    if (levelNum < 5) {
                        const nextLevelBtn = document.getElementById(`level${levelNum + 1}`);
                        if (nextLevelBtn) {
                            nextLevelBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                            nextLevelBtn.classList.add('border-white');
                            const lockIcon = nextLevelBtn.querySelector('.absolute.inset-0');
                            if (lockIcon) lockIcon.classList.add('hidden');
                        }
                    } else if (levelNum === 4) {
                        // Unlock challenge level
                        const challengeBtn = document.getElementById('level5');
                        if (challengeBtn) {
                            challengeBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                            challengeBtn.classList.add('border-white');
                            const lockIcon = challengeBtn.querySelector('.absolute.inset-0');
                            if (lockIcon) lockIcon.classList.add('hidden');
                        }
                    }
                }
            });
        }

        // Information system for space weather terms
        const spaceWeatherInfo = {
            solarFlares: {
                title: "☀️ Solar Flares",
                content: "Solar flares are like giant explosions on the Sun! They happen when the Sun's magnetic field lines get twisted and suddenly snap back into place, releasing huge amounts of energy.",
                facts: "🔥 Fun Fact: A single solar flare can release as much energy as billions of hydrogen bombs! But don't worry - Earth's atmosphere and magnetic field protect us from harm."
            },
            solarWind: {
                title: "💨 Solar Wind",
                content: "Solar wind is a stream of tiny particles that the Sun constantly sends out into space. Think of it like an invisible breeze made of super tiny pieces of the Sun!",
                facts: "🌪️ Fun Fact: Solar wind travels at about 1 million miles per hour! It takes about 4 days for solar wind to travel from the Sun to Earth."
            },
            magneticShield: {
                title: "🛡️ Magnetic Shield",
                content: "Earth has an invisible force field called a magnetosphere that protects us from space weather. It's created by our planet's magnetic field, like a giant invisible bubble around Earth!",
                facts: "🧲 Fun Fact: Without Earth's magnetic shield, our atmosphere would slowly be blown away by solar wind, just like what happened to Mars billions of years ago!"
            },
            auroras: {
                title: "✨ Auroras (Northern & Southern Lights)",
                content: "Auroras are beautiful dancing lights in the sky! They happen when some solar particles sneak past Earth's magnetic shield and bump into gases in our atmosphere, making them glow like a natural light show.",
                facts: "🌈 Fun Fact: Auroras can be green, purple, red, or blue depending on which gases they hit! Green is the most common color and comes from oxygen molecules."
            }
        };

        // Show information popup
        function showInfo(topic) {
            const popup = document.getElementById('infoPopup');
            const title = document.getElementById('infoTitle');
            const content = document.getElementById('infoContent');
            const facts = document.getElementById('infoFacts');
            
            const info = spaceWeatherInfo[topic];
            
            title.textContent = info.title;
            content.textContent = info.content;
            facts.textContent = info.facts;
            
            popup.classList.remove('hidden');
            // Add animation
            setTimeout(() => {
                popup.querySelector('.bg-white').classList.remove('scale-95');
                popup.querySelector('.bg-white').classList.add('scale-100');
            }, 10);
        }

        // Close information popup
        function closeInfo() {
            const popup = document.getElementById('infoPopup');
            popup.querySelector('.bg-white').classList.remove('scale-100');
            popup.querySelector('.bg-white').classList.add('scale-95');
            
            setTimeout(() => {
                popup.classList.add('hidden');
            }, 300);
        }

        // Transition to general public information
        function transitionToGeneralPublic() {
            const categoriesSection = document.getElementById('categoriesSection');
            const generalPublicSection = document.getElementById('generalPublicSection');
            
            // Fade out categories section
            categoriesSection.classList.add('fade-out');
            
            setTimeout(() => {
                // Hide categories and show general public
                categoriesSection.classList.add('hidden');
                generalPublicSection.classList.remove('hidden');
                
                // Fade in general public section
                setTimeout(() => {
                    generalPublicSection.classList.add('fade-in');
                }, 100);
            }, 500);
        }

        // Go back to categories from general public
        function goBackToCategories() {
            const generalPublicSection = document.getElementById('generalPublicSection');
            const categoriesSection = document.getElementById('categoriesSection');
            
            // Fade out general public section
            generalPublicSection.classList.add('fade-out');
            
            setTimeout(() => {
                // Hide general public and show categories
                generalPublicSection.classList.add('hidden');
                generalPublicSection.classList.remove('fade-in');
                categoriesSection.classList.remove('hidden');
                categoriesSection.classList.remove('fade-out');
                
                // Fade in categories section
                setTimeout(() => {
                    categoriesSection.classList.add('fade-in');
                }, 100);
            }, 500);
        }

        // Explore more categories
        function exploreMoreCategories() {
            goBackToCategories();
        }

        // Password visibility toggle function
        function togglePasswordVisibility(inputId) {
            const input = document.getElementById(inputId);
            const eyeIcon = document.getElementById(inputId + 'EyeIcon');
            
            if (input.type === 'password') {
                input.type = 'text';
                // Change to eye-slash icon (hidden)
                eyeIcon.innerHTML = `
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"></path>
                `;
            } else {
                input.type = 'password';
                // Change back to eye icon (visible)
                eyeIcon.innerHTML = `
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                `;
            }
        }

        // Add shake animation for launch effect
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
            }
            @keyframes fadeOut {
                0% { opacity: 1; transform: translateY(0); }
                100% { opacity: 0; transform: translateY(-20px); }
            }
        `;
        document.head.appendChild(style);

        // Level System Variables
        let currentCategory = 'general';
        let currentLevel = 1;
        let completedLevels = {};
        let currentQuizQuestion = 0;
        let quizScore = 0;
        let currentLevelQuizQuestion = 0;
        let levelQuizScore = 0;
        let currentUser = null;

        // Initialize completed levels for all categories
        function initializeCompletedLevels() {
            const categories = ['general', 'astronaut', 'farmers', 'sun', 'moon', 'rover'];
            categories.forEach(category => {
                if (!completedLevels[category]) {
                    completedLevels[category] = [];
                }
            });
        }

        // Save progress to localStorage
        function saveProgress() {
            if (currentUser) {
                const progressData = {
                    completedLevels: completedLevels,
                    lastCategory: currentCategory,
                    timestamp: new Date().toISOString()
                };
                localStorage.setItem(`spaceWeatherProgress_${currentUser}`, JSON.stringify(progressData));
            }
        }

        // Load progress from localStorage
        function loadProgress() {
            if (currentUser) {
                const savedData = localStorage.getItem(`spaceWeatherProgress_${currentUser}`);
                if (savedData) {
                    try {
                        const progressData = JSON.parse(savedData);
                        completedLevels = progressData.completedLevels || {};
                        currentCategory = progressData.lastCategory || 'general';
                        
                        // Show welcome back message
                        const completedCount = Object.values(completedLevels).reduce((total, levels) => total + levels.length, 0);
                        if (completedCount > 0) {
                            setTimeout(() => {
                                showWelcomeBackMessage(completedCount);
                            }, 1000);
                        }
                        
                        return true;
                    } catch (error) {
                        console.log('Error loading progress:', error);
                    }
                }
            }
            return false;
        }

        // Show welcome back message
        function showWelcomeBackMessage(completedCount) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 max-w-sm text-center';
            messageDiv.innerHTML = `
                <div class="text-2xl mb-2">🎉</div>
                <div class="font-bold">Welcome Back, Space Explorer!</div>
                <div class="text-sm mt-1">You've completed ${completedCount} level${completedCount !== 1 ? 's' : ''}! Continue your cosmic journey! 🚀</div>
            `;
            
            document.body.appendChild(messageDiv);
            
            // Auto-remove after 4 seconds
            setTimeout(() => {
                messageDiv.style.animation = 'fadeOut 0.5s ease-out forwards';
                setTimeout(() => messageDiv.remove(), 500);
            }, 4000);
            
            // Add click to dismiss
            messageDiv.addEventListener('click', () => {
                messageDiv.style.animation = 'fadeOut 0.5s ease-out forwards';
                setTimeout(() => messageDiv.remove(), 500);
            });
        }

        // Initialize on page load
        initializeCompletedLevels();

        // Level Content Data - All Categories
        const levelData = {
            general: {
                1: {
                    icon: "📱",
                    title: "Level 1: Your Phone's GPS",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-green-400">🌟 What is Space Weather?</h3>
                            <p class="mb-4 text-blue-200">Imagine our Sun is like a giant campfire in the sky! Sometimes this campfire gets really excited and sends out invisible "space wind" and bright flashes toward Earth. This is called space weather!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-green-300">📱 How it affects your phone's GPS:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Your maps might show you in the wrong place</li>
                                <li>• It might take longer to find your location</li>
                                <li>• Navigation apps could give wrong directions</li>
                            </ul>
                            
                            <div class="bg-green-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-green-200 text-sm">
                                    💡 <strong>Fun Fact:</strong> GPS satellites are 12,000 miles above Earth - that's really high up where space weather is stronger!
                                </p>
                            </div>
                        </div>
                    `
                },
                2: {
                    icon: "📡",
                    title: "Level 2: Internet & Phone Calls",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-purple-400">📡 Communication Signals</h3>
                            <p class="mb-4 text-blue-200">Space weather can make it harder for signals to travel through the air, just like trying to talk through a windy storm!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-purple-300">How it affects communication:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Your internet might be slower</li>
                                <li>• Phone calls could sound fuzzy</li>
                                <li>• Radio stations might have static</li>
                            </ul>
                            
                            <div class="bg-purple-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-purple-200 text-sm">
                                    💡 <strong>Think of it like:</strong> The "space wind" makes signals wobbly, just like how wind makes flags flutter!
                                </p>
                            </div>
                        </div>
                    `
                },
                3: {
                    icon: "💡",
                    title: "Level 3: Electricity at Home",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-yellow-400">⚡ Power and Electricity</h3>
                            <p class="mb-4 text-blue-200">Very strong space weather can affect the electricity that powers your home, but don't worry - this only happens during very big space storms!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-yellow-300">What might happen:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Lights might flicker or go out</li>
                                <li>• Your TV or computer might turn off</li>
                                <li>• Traffic lights could stop working</li>
                            </ul>
                            
                            <div class="bg-yellow-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-yellow-200 text-sm">
                                    💡 <strong>Don't worry!</strong> This only happens during very big space storms, which are rare! Scientists watch for these and help keep us safe.
                                </p>
                            </div>
                        </div>
                    `
                },
                4: {
                    icon: "✨",
                    title: "Level 4: Beautiful Light Shows!",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-pink-400">✨ Auroras - Nature's Light Show!</h3>
                            <p class="mb-4 text-blue-200">The best part of space weather - amazing lights in the sky called auroras! They're like nature's own fireworks show.</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-pink-300">What you might see:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Green, purple, and blue dancing lights</li>
                                <li>• Usually seen in Alaska and northern Canada</li>
                                <li>• Sometimes visible in northern US states!</li>
                            </ul>
                            
                            <div class="bg-pink-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-pink-200 text-sm">
                                    💡 <strong>Amazing Fact:</strong> Auroras happen when space particles bump into gases in our atmosphere, making them glow like a natural light show - completely safe and beautiful to watch!
                                </p>
                            </div>
                        </div>
                    `
                }
            },
            astronaut: {
                1: {
                    icon: "🚀",
                    title: "Level 1: Radiation Exposure",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-red-400">☢️ Space Radiation Dangers</h3>
                            <p class="mb-4 text-blue-200">In space, astronauts face invisible radiation from the Sun and deep space. It's like being exposed to thousands of X-rays!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-red-300">🚀 How it affects astronauts:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Can damage DNA and cause cancer</li>
                                <li>• Makes astronauts feel sick during solar storms</li>
                                <li>• Limits how long they can stay in space</li>
                            </ul>
                            
                            <div class="bg-red-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-red-200 text-sm">
                                    💡 <strong>Protection:</strong> Spacecraft have special shielding, and astronauts take shelter during major solar storms!
                                </p>
                            </div>
                        </div>
                    `
                },
                2: {
                    icon: "🛰️",
                    title: "Level 2: Spacecraft Electronics",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-blue-400">⚡ Electronic System Failures</h3>
                            <p class="mb-4 text-blue-200">Space weather can fry spacecraft computers and navigation systems, leaving astronauts stranded!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-blue-300">🛰️ What can go wrong:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Computers crash and need rebooting</li>
                                <li>• Navigation systems give wrong directions</li>
                                <li>• Communication with Earth gets cut off</li>
                            </ul>
                            
                            <div class="bg-blue-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-blue-200 text-sm">
                                    💡 <strong>Backup Systems:</strong> Spacecraft have multiple backup computers and manual controls for emergencies!
                                </p>
                            </div>
                        </div>
                    `
                },
                3: {
                    icon: "🌌",
                    title: "Level 3: EVA Safety",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-purple-400">👨‍🚀 Spacewalk Dangers</h3>
                            <p class="mb-4 text-blue-200">During spacewalks (EVAs), astronauts are completely exposed to space weather with only their spacesuit for protection!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-purple-300">🌌 EVA risks:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• High radiation exposure outside the spacecraft</li>
                                <li>• Spacesuit electronics can malfunction</li>
                                <li>• Must return inside during solar storms</li>
                            </ul>
                            
                            <div class="bg-purple-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-purple-200 text-sm">
                                    💡 <strong>Safety First:</strong> Mission Control monitors space weather 24/7 and cancels spacewalks when it's dangerous!
                                </p>
                            </div>
                        </div>
                    `
                },
                4: {
                    icon: "🏠",
                    title: "Level 4: Space Station Operations",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-green-400">🏠 ISS Protection Systems</h3>
                            <p class="mb-4 text-blue-200">The International Space Station has special procedures and safe rooms to protect astronauts during severe space weather!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-green-300">🏠 ISS safety measures:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Crew retreats to the most shielded modules</li>
                                <li>• Non-essential systems are shut down</li>
                                <li>• Experiments are paused until storms pass</li>
                            </ul>
                            
                            <div class="bg-green-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-green-200 text-sm">
                                    💡 <strong>Amazing Fact:</strong> The ISS can actually change its orbit slightly to avoid the worst space weather!
                                </p>
                            </div>
                        </div>
                    `
                }
            },
            farmers: {
                1: {
                    icon: "🛰️",
                    title: "Level 1: GPS Tractors",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-green-400">🚜 Precision Agriculture</h3>
                            <p class="mb-4 text-blue-200">Modern farms use GPS-guided tractors that can plant seeds in perfectly straight lines. But space weather can make them go off course!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-green-300">🛰️ How GPS helps farming:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Tractors drive themselves in perfect rows</li>
                                <li>• Saves fuel and reduces crop damage</li>
                                <li>• Helps apply fertilizer exactly where needed</li>
                            </ul>
                            
                            <div class="bg-green-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-green-200 text-sm">
                                    💡 <strong>Space Weather Impact:</strong> During solar storms, GPS can be off by several feet, causing tractors to miss their target areas!
                                </p>
                            </div>
                        </div>
                    `
                },
                2: {
                    icon: "📡",
                    title: "Level 2: Weather Monitoring",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-blue-400">🌦️ Satellite Weather Data</h3>
                            <p class="mb-4 text-blue-200">Farmers rely on weather satellites to know when to plant, water, and harvest crops. Space weather can disrupt these vital forecasts!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-blue-300">📡 Weather satellite problems:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Satellite images become fuzzy or corrupted</li>
                                <li>• Weather predictions become less accurate</li>
                                <li>• Farmers can't plan irrigation schedules</li>
                            </ul>
                            
                            <div class="bg-blue-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-blue-200 text-sm">
                                    💡 <strong>Backup Plans:</strong> Smart farmers use multiple weather sources and local observations when satellites act up!
                                </p>
                            </div>
                        </div>
                    `
                },
                3: {
                    icon: "💧",
                    title: "Level 3: Irrigation Systems",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-cyan-400">💧 Smart Irrigation Control</h3>
                            <p class="mb-4 text-blue-200">Modern farms use computer-controlled irrigation systems that communicate via radio signals. Space weather can interfere with these communications!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-cyan-300">💧 Irrigation challenges:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Remote sensors stop reporting soil moisture</li>
                                <li>• Sprinkler systems can't be controlled remotely</li>
                                <li>• Crops might get too much or too little water</li>
                            </ul>
                            
                            <div class="bg-cyan-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-cyan-200 text-sm">
                                    💡 <strong>Solution:</strong> Many systems have manual overrides and local controls for when space weather disrupts communications!
                                </p>
                            </div>
                        </div>
                    `
                },
                4: {
                    icon: "📊",
                    title: "Level 4: Crop Monitoring",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-yellow-400">📊 Satellite Crop Analysis</h3>
                            <p class="mb-4 text-blue-200">Farmers use satellite images to monitor crop health, detect diseases, and estimate yields. Space weather can make these images unreliable!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-yellow-300">📊 Monitoring benefits:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Spot crop diseases before they spread</li>
                                <li>• Identify areas needing more fertilizer</li>
                                <li>• Predict harvest yields for market planning</li>
                            </ul>
                            
                            <div class="bg-yellow-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-yellow-200 text-sm">
                                    💡 <strong>Future Tech:</strong> Drones are becoming backup eyes in the sky when satellites are affected by space weather!
                                </p>
                            </div>
                        </div>
                    `
                }
            },
            sun: {
                1: {
                    icon: "🔥",
                    title: "Level 1: Solar Flares",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-orange-400">🔥 Explosive Solar Flares</h3>
                            <p class="mb-4 text-blue-200">Solar flares are like giant explosions on the Sun's surface! They release more energy than billions of nuclear bombs in just minutes!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-orange-300">🔥 What causes solar flares:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Twisted magnetic field lines suddenly snap</li>
                                <li>• Releases enormous amounts of energy</li>
                                <li>• Sends X-rays and particles toward Earth</li>
                            </ul>
                            
                            <div class="bg-orange-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-orange-200 text-sm">
                                    💡 <strong>Speed of Light:</strong> Solar flare X-rays reach Earth in just 8 minutes - the same time sunlight takes to travel here!
                                </p>
                            </div>
                        </div>
                    `
                },
                2: {
                    icon: "💨",
                    title: "Level 2: Solar Wind",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-blue-400">💨 The Solar Wind Stream</h3>
                            <p class="mb-4 text-blue-200">The Sun constantly blows a stream of particles called solar wind into space at over 1 million miles per hour!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-blue-300">💨 Solar wind facts:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Made of protons and electrons from the Sun</li>
                                <li>• Takes 2-4 days to reach Earth</li>
                                <li>• Creates a bubble around our solar system</li>
                            </ul>
                            
                            <div class="bg-blue-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-blue-200 text-sm">
                                    💡 <strong>Invisible Force:</strong> Solar wind is so thin that you wouldn't feel it, but it's powerful enough to push spacecraft off course!
                                </p>
                            </div>
                        </div>
                    `
                },
                3: {
                    icon: "🌪️",
                    title: "Level 3: Coronal Mass Ejections",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-purple-400">🌪️ Giant Solar Storms</h3>
                            <p class="mb-4 text-blue-200">Coronal Mass Ejections (CMEs) are like solar hurricanes - massive clouds of particles hurled into space by the Sun!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-purple-300">🌪️ CME characteristics:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Can contain billions of tons of solar material</li>
                                <li>• Travel at speeds up to 7 million mph</li>
                                <li>• Cause the strongest geomagnetic storms</li>
                            </ul>
                            
                            <div class="bg-purple-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-purple-200 text-sm">
                                    💡 <strong>Earth Impact:</strong> When a CME hits Earth's magnetic field, it can cause auroras visible as far south as Mexico!
                                </p>
                            </div>
                        </div>
                    `
                },
                4: {
                    icon: "🌞",
                    title: "Level 4: Solar Cycle",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-yellow-400">🌞 The 11-Year Solar Cycle</h3>
                            <p class="mb-4 text-blue-200">The Sun goes through an 11-year cycle of activity, from quiet periods with few sunspots to active periods with many solar storms!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-yellow-300">🌞 Solar cycle phases:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Solar minimum: Few sunspots, quiet Sun</li>
                                <li>• Solar maximum: Many sunspots, active storms</li>
                                <li>• Sunspots are cooler, darker regions on the Sun</li>
                            </ul>
                            
                            <div class="bg-yellow-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-yellow-200 text-sm">
                                    💡 <strong>Prediction Power:</strong> Scientists track the solar cycle to predict when space weather will be most dangerous!
                                </p>
                            </div>
                        </div>
                    `
                }
            },
            moon: {
                1: {
                    icon: "🌙",
                    title: "Level 1: No Atmosphere Protection",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-gray-400">🌙 Exposed to Space</h3>
                            <p class="mb-4 text-blue-200">Unlike Earth, the Moon has no atmosphere or magnetic field to protect it from space weather. It's completely exposed!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-gray-300">🌙 Moon's vulnerability:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Solar radiation hits the surface directly</li>
                                <li>• No magnetic field to deflect particles</li>
                                <li>• Extreme temperature swings from space weather</li>
                            </ul>
                            
                            <div class="bg-gray-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-gray-200 text-sm">
                                    💡 <strong>Future Concern:</strong> Astronauts returning to the Moon will need special shelters to protect them from space weather!
                                </p>
                            </div>
                        </div>
                    `
                },
                2: {
                    icon: "⚡",
                    title: "Level 2: Lunar Dust Charging",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-yellow-400">⚡ Electrically Charged Dust</h3>
                            <p class="mb-4 text-blue-200">Space weather makes lunar dust particles become electrically charged, causing them to stick to everything and float around!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-yellow-300">⚡ Charged dust problems:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Dust sticks to spacesuits and equipment</li>
                                <li>• Can damage sensitive electronics</li>
                                <li>• Creates dust storms that hover above surface</li>
                            </ul>
                            
                            <div class="bg-yellow-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-yellow-200 text-sm">
                                    💡 <strong>Apollo Experience:</strong> Apollo astronauts had major problems with sticky lunar dust getting into everything!
                                </p>
                            </div>
                        </div>
                    `
                },
                3: {
                    icon: "📡",
                    title: "Level 3: Communication Blackouts",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-red-400">📡 Lost Contact with Earth</h3>
                            <p class="mb-4 text-blue-200">Space weather can disrupt radio communications between the Moon and Earth, leaving lunar missions isolated!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-red-300">📡 Communication risks:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Radio signals get absorbed by Earth's atmosphere</li>
                                <li>• Mission Control loses contact for hours</li>
                                <li>• Emergency situations become more dangerous</li>
                            </ul>
                            
                            <div class="bg-red-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-red-200 text-sm">
                                    💡 <strong>Backup Plan:</strong> Future lunar missions will use relay satellites to maintain contact during space weather events!
                                </p>
                            </div>
                        </div>
                    `
                },
                4: {
                    icon: "🏗️",
                    title: "Level 4: Lunar Base Challenges",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-blue-400">🏗️ Building on the Moon</h3>
                            <p class="mb-4 text-blue-200">Future lunar bases will need special design features to protect astronauts and equipment from constant space weather exposure!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-blue-300">🏗️ Base protection needs:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Underground shelters for solar storms</li>
                                <li>• Radiation-resistant building materials</li>
                                <li>• Backup power systems for electronics</li>
                            </ul>
                            
                            <div class="bg-blue-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-blue-200 text-sm">
                                    💡 <strong>Smart Solution:</strong> Scientists plan to build lunar bases inside lava tubes - natural underground caves that provide protection!
                                </p>
                            </div>
                        </div>
                    `
                }
            },
            rover: {
                1: {
                    icon: "🤖",
                    title: "Level 1: Mars Rover Electronics",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-red-400">🤖 Surviving on Mars</h3>
                            <p class="mb-4 text-blue-200">Mars rovers like Curiosity and Perseverance face space weather challenges every day! They need special protection to keep working.</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-red-300">🤖 Rover challenges:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Computer memory gets corrupted by radiation</li>
                                <li>• Cameras can develop "snow" from particle hits</li>
                                <li>• Solar panels lose efficiency over time</li>
                            </ul>
                            
                            <div class="bg-red-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-red-200 text-sm">
                                    💡 <strong>Smart Design:</strong> Rovers have radiation-hardened computers and can restart themselves if they crash!
                                </p>
                            </div>
                        </div>
                    `
                },
                2: {
                    icon: "📡",
                    title: "Level 2: Communication Delays",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-blue-400">📡 Talking Across Space</h3>
                            <p class="mb-4 text-blue-200">It takes 4-24 minutes for signals to travel between Earth and Mars! Space weather can make this communication even more difficult.</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-blue-300">📡 Communication problems:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Radio signals get weaker during solar storms</li>
                                <li>• Data transmission errors increase</li>
                                <li>• Sometimes rovers go silent for days</li>
                            </ul>
                            
                            <div class="bg-blue-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-blue-200 text-sm">
                                    💡 <strong>Autonomous Operation:</strong> Rovers must make their own decisions when they can't talk to Earth!
                                </p>
                            </div>
                        </div>
                    `
                },
                3: {
                    icon: "🔋",
                    title: "Level 3: Power System Failures",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-yellow-400">🔋 Keeping the Lights On</h3>
                            <p class="mb-4 text-blue-200">Space weather can damage rover power systems, including solar panels and nuclear batteries that keep them alive!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-yellow-300">🔋 Power challenges:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Solar panels degrade from radiation exposure</li>
                                <li>• Dust storms block sunlight for weeks</li>
                                <li>• Battery systems can fail in extreme conditions</li>
                            </ul>
                            
                            <div class="bg-yellow-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-yellow-200 text-sm">
                                    💡 <strong>Nuclear Power:</strong> Some rovers use nuclear batteries that work for years, even during dust storms!
                                </p>
                            </div>
                        </div>
                    `
                },
                4: {
                    icon: "🔬",
                    title: "Level 4: Scientific Instruments",
                    content: `
                        <div class="text-white">
                            <h3 class="text-xl font-bold mb-4 text-purple-400">🔬 Protecting Science Tools</h3>
                            <p class="mb-4 text-blue-200">Rovers carry delicate scientific instruments to study planets. Space weather can interfere with their measurements and damage sensitive equipment!</p>
                            
                            <h4 class="text-lg font-bold mb-3 text-purple-300">🔬 Instrument protection:</h4>
                            <ul class="space-y-2 text-blue-100 mb-4">
                                <li>• Spectrometers need shielding from radiation</li>
                                <li>• Cameras must filter out particle "noise"</li>
                                <li>• Drilling tools can malfunction in extreme weather</li>
                            </ul>
                            
                            <div class="bg-purple-900 bg-opacity-50 p-4 rounded-lg">
                                <p class="text-purple-200 text-sm">
                                    💡 <strong>Amazing Discovery:</strong> Rovers have actually detected space weather events happening on Mars in real-time!
                                </p>
                            </div>
                        </div>
                    `
                }
            }
        };

        // Level Quiz Questions (2 questions per level) - All Categories
        const levelQuizQuestions = {
            general: {
                1: [
                    {
                        question: "What can space weather do to your phone's GPS?",
                        options: [
                            "Make it work better",
                            "Show you in the wrong place",
                            "Turn it into a rocket",
                            "Make it sing songs"
                        ],
                        correct: 1,
                        explanation: "Correct! Space weather can confuse GPS satellites, making your maps show you in the wrong place!"
                    },
                    {
                        question: "How high up are GPS satellites?",
                        options: [
                            "As tall as a building",
                            "12,000 miles above Earth",
                            "Just above the clouds",
                            "On the ground"
                        ],
                        correct: 1,
                        explanation: "Great job! GPS satellites are 12,000 miles above Earth where space weather is stronger!"
                    }
                ],
                2: [
                    {
                        question: "What happens to phone calls during space weather?",
                        options: [
                            "They become louder",
                            "They might sound fuzzy",
                            "They turn into music",
                            "Nothing happens"
                        ],
                        correct: 1,
                        explanation: "Right! Space weather can make signals wobbly, causing phone calls to sound fuzzy!"
                    },
                    {
                        question: "Space weather affects signals like:",
                        options: [
                            "Wind makes flags flutter",
                            "Rain makes you wet",
                            "Sun makes you warm",
                            "Snow makes you cold"
                        ],
                        correct: 0,
                        explanation: "Perfect! Just like wind makes flags flutter, space weather makes signals wobbly!"
                    }
                ],
                3: [
                    {
                        question: "What might happen to lights during strong space weather?",
                        options: [
                            "They become brighter",
                            "They change colors",
                            "They might flicker or go out",
                            "They start dancing"
                        ],
                        correct: 2,
                        explanation: "Correct! During very strong space weather, lights might flicker or go out temporarily!"
                    },
                    {
                        question: "How often do big space storms happen?",
                        options: [
                            "Every day",
                            "Every hour",
                            "They are rare",
                            "Never"
                        ],
                        correct: 2,
                        explanation: "Exactly! Big space storms that affect electricity are rare, so don't worry!"
                    }
                ],
                4: [
                    {
                        question: "What are auroras?",
                        options: [
                            "Scary space monsters",
                            "Beautiful dancing lights in the sky",
                            "Broken satellites",
                            "Space weather storms"
                        ],
                        correct: 1,
                        explanation: "Perfect! Auroras are beautiful dancing lights in the sky - like nature's fireworks!"
                    },
                    {
                        question: "What colors can auroras be?",
                        options: [
                            "Only green",
                            "Only blue",
                            "Green, purple, blue, and red",
                            "Only white"
                        ],
                        correct: 2,
                        explanation: "Amazing! Auroras can be green, purple, blue, and red - a whole rainbow of colors!"
                    }
                ]
            },
            astronaut: {
                1: [
                    {
                        question: "What is the biggest danger to astronauts from space weather?",
                        options: [
                            "Getting lost in space",
                            "Radiation exposure",
                            "Running out of food",
                            "Feeling homesick"
                        ],
                        correct: 1,
                        explanation: "Correct! Radiation from space weather is like being exposed to thousands of X-rays!"
                    },
                    {
                        question: "How do spacecraft protect astronauts from radiation?",
                        options: [
                            "With special shielding",
                            "By flying really fast",
                            "With magic force fields",
                            "By hiding behind the Moon"
                        ],
                        correct: 0,
                        explanation: "Right! Spacecraft have special shielding materials to block harmful radiation!"
                    }
                ],
                2: [
                    {
                        question: "What happens to spacecraft computers during space weather?",
                        options: [
                            "They work perfectly",
                            "They can crash and need rebooting",
                            "They turn into robots",
                            "They start playing games"
                        ],
                        correct: 1,
                        explanation: "Exactly! Space weather can cause computers to crash, just like your computer at home sometimes does!"
                    },
                    {
                        question: "Why do spacecraft need backup systems?",
                        options: [
                            "In case the main systems fail",
                            "To make them heavier",
                            "To use more power",
                            "Just for fun"
                        ],
                        correct: 0,
                        explanation: "Perfect! Backup systems ensure astronauts stay safe when space weather damages the main systems!"
                    }
                ],
                3: [
                    {
                        question: "What is an EVA?",
                        options: [
                            "A type of spacecraft",
                            "A spacewalk outside the spacecraft",
                            "A space food",
                            "A planet name"
                        ],
                        correct: 1,
                        explanation: "Great! EVA stands for Extra-Vehicular Activity - a spacewalk outside the spacecraft!"
                    },
                    {
                        question: "What happens to spacewalks during solar storms?",
                        options: [
                            "They become more fun",
                            "They must be cancelled for safety",
                            "They last longer",
                            "Nothing changes"
                        ],
                        correct: 1,
                        explanation: "Correct! Spacewalks are cancelled during solar storms because it's too dangerous outside!"
                    }
                ],
                4: [
                    {
                        question: "Where do ISS astronauts go during severe space weather?",
                        options: [
                            "Outside for a better view",
                            "To the most shielded modules",
                            "To Earth immediately",
                            "To the Moon"
                        ],
                        correct: 1,
                        explanation: "Right! Astronauts retreat to the most protected parts of the space station during storms!"
                    },
                    {
                        question: "Can the ISS change its orbit to avoid space weather?",
                        options: [
                            "No, it's stuck in one place",
                            "Yes, it can adjust slightly",
                            "Only on weekends",
                            "Only during full moons"
                        ],
                        correct: 1,
                        explanation: "Amazing! The ISS can actually make small orbit adjustments to avoid the worst space weather!"
                    }
                ]
            },
            farmers: {
                1: [
                    {
                        question: "How do GPS-guided tractors help farmers?",
                        options: [
                            "They plant seeds in perfectly straight lines",
                            "They make the crops grow faster",
                            "They water the plants automatically",
                            "They scare away birds"
                        ],
                        correct: 0,
                        explanation: "Correct! GPS helps tractors drive in perfect rows, saving fuel and reducing crop damage!"
                    },
                    {
                        question: "What happens when space weather affects GPS on farms?",
                        options: [
                            "Tractors work better",
                            "Tractors can go off course by several feet",
                            "Tractors turn into robots",
                            "Nothing happens"
                        ],
                        correct: 1,
                        explanation: "Right! Space weather can make GPS inaccurate, causing tractors to miss their target areas!"
                    }
                ],
                2: [
                    {
                        question: "Why do farmers need weather satellites?",
                        options: [
                            "To know when to plant and harvest",
                            "To take pretty pictures",
                            "To communicate with aliens",
                            "To control the weather"
                        ],
                        correct: 0,
                        explanation: "Perfect! Weather satellites help farmers plan when to plant, water, and harvest their crops!"
                    },
                    {
                        question: "What happens to satellite weather data during space weather?",
                        options: [
                            "It becomes more accurate",
                            "Images can become fuzzy or corrupted",
                            "It predicts the future",
                            "It shows alien spaceships"
                        ],
                        correct: 1,
                        explanation: "Exactly! Space weather can make satellite images fuzzy, making weather predictions less reliable!"
                    }
                ],
                3: [
                    {
                        question: "How do modern irrigation systems work?",
                        options: [
                            "Farmers water everything by hand",
                            "Computer-controlled systems use radio signals",
                            "Rain does all the work",
                            "Plants water themselves"
                        ],
                        correct: 1,
                        explanation: "Great! Modern farms use computer-controlled irrigation that communicates via radio signals!"
                    },
                    {
                        question: "What backup do farmers have when space weather disrupts communications?",
                        options: [
                            "They give up farming",
                            "Manual overrides and local controls",
                            "They ask aliens for help",
                            "They wait for better weather"
                        ],
                        correct: 1,
                        explanation: "Smart! Many irrigation systems have manual controls for when space weather disrupts communications!"
                    }
                ],
                4: [
                    {
                        question: "How do satellites help farmers monitor crops?",
                        options: [
                            "They spot diseases and estimate yields",
                            "They water the crops from space",
                            "They scare away pests",
                            "They make crops grow faster"
                        ],
                        correct: 0,
                        explanation: "Perfect! Satellites help farmers spot crop diseases early and predict harvest yields!"
                    },
                    {
                        question: "What technology is becoming a backup for satellites?",
                        options: [
                            "Hot air balloons",
                            "Drones",
                            "Helicopters",
                            "Kites"
                        ],
                        correct: 1,
                        explanation: "Excellent! Drones are becoming backup eyes in the sky when satellites are affected by space weather!"
                    }
                ]
            },
            sun: {
                1: [
                    {
                        question: "What are solar flares like?",
                        options: [
                            "Gentle breezes from the Sun",
                            "Giant explosions on the Sun's surface",
                            "Cool spots on the Sun",
                            "The Sun's way of sleeping"
                        ],
                        correct: 1,
                        explanation: "Correct! Solar flares are like giant explosions that release more energy than billions of nuclear bombs!"
                    },
                    {
                        question: "How fast do solar flare X-rays reach Earth?",
                        options: [
                            "8 minutes",
                            "8 hours",
                            "8 days",
                            "8 years"
                        ],
                        correct: 0,
                        explanation: "Amazing! Solar flare X-rays reach Earth in just 8 minutes - the same time as sunlight!"
                    }
                ],
                2: [
                    {
                        question: "How fast does solar wind travel?",
                        options: [
                            "As fast as a car",
                            "Over 1 million miles per hour",
                            "As fast as a snail",
                            "It doesn't move"
                        ],
                        correct: 1,
                        explanation: "Incredible! Solar wind travels at over 1 million miles per hour through space!"
                    },
                    {
                        question: "How long does solar wind take to reach Earth?",
                        options: [
                            "8 minutes",
                            "2-4 days",
                            "1 year",
                            "It never reaches Earth"
                        ],
                        correct: 1,
                        explanation: "Right! Solar wind takes 2-4 days to travel from the Sun to Earth!"
                    }
                ],
                3: [
                    {
                        question: "What are Coronal Mass Ejections (CMEs) like?",
                        options: [
                            "Gentle solar breezes",
                            "Solar hurricanes with billions of tons of material",
                            "The Sun's way of sneezing",
                            "Cool spots on the Sun"
                        ],
                        correct: 1,
                        explanation: "Perfect! CMEs are like solar hurricanes that can contain billions of tons of solar material!"
                    },
                    {
                        question: "How fast can CMEs travel?",
                        options: [
                            "As fast as a bicycle",
                            "Up to 7 million miles per hour",
                            "They don't move",
                            "As fast as a walking person"
                        ],
                        correct: 1,
                        explanation: "Wow! The fastest CMEs can travel at speeds up to 7 million miles per hour!"
                    }
                ],
                4: [
                    {
                        question: "How long is the solar cycle?",
                        options: [
                            "1 year",
                            "11 years",
                            "100 years",
                            "1 day"
                        ],
                        correct: 1,
                        explanation: "Excellent! The Sun goes through an 11-year cycle from quiet to active and back to quiet!"
                    },
                    {
                        question: "What are sunspots?",
                        options: [
                            "Hot, bright regions on the Sun",
                            "Cooler, darker regions on the Sun",
                            "Holes in the Sun",
                            "The Sun's eyes"
                        ],
                        correct: 1,
                        explanation: "Great! Sunspots are cooler, darker regions on the Sun where magnetic fields are strongest!"
                    }
                ]
            },
            moon: {
                1: [
                    {
                        question: "What protects Earth from space weather that the Moon doesn't have?",
                        options: [
                            "Atmosphere and magnetic field",
                            "Tall mountains",
                            "Lots of water",
                            "Green plants"
                        ],
                        correct: 0,
                        explanation: "Correct! Earth has an atmosphere and magnetic field to protect us, but the Moon has neither!"
                    },
                    {
                        question: "How exposed is the Moon to space weather?",
                        options: [
                            "Partially protected",
                            "Completely exposed",
                            "Fully protected",
                            "Sometimes protected"
                        ],
                        correct: 1,
                        explanation: "Right! The Moon is completely exposed to space weather with no protection at all!"
                    }
                ],
                2: [
                    {
                        question: "What happens to lunar dust during space weather?",
                        options: [
                            "It disappears",
                            "It becomes electrically charged and sticky",
                            "It turns into rocks",
                            "It changes color"
                        ],
                        correct: 1,
                        explanation: "Perfect! Space weather makes lunar dust electrically charged, causing it to stick to everything!"
                    },
                    {
                        question: "What problems did Apollo astronauts have with lunar dust?",
                        options: [
                            "It tasted bad",
                            "It got into everything and was hard to clean",
                            "It was too heavy",
                            "It made them sneeze"
                        ],
                        correct: 1,
                        explanation: "Exactly! Apollo astronauts had major problems with sticky lunar dust getting into their equipment!"
                    }
                ],
                3: [
                    {
                        question: "What can happen to communications between Moon and Earth during space weather?",
                        options: [
                            "They become clearer",
                            "Radio signals get disrupted and contact is lost",
                            "They work perfectly",
                            "They become faster"
                        ],
                        correct: 1,
                        explanation: "Correct! Space weather can disrupt radio signals, leaving lunar missions isolated from Earth!"
                    },
                    {
                        question: "What backup plan do future lunar missions have for communication problems?",
                        options: [
                            "Shouting really loud",
                            "Relay satellites",
                            "Smoke signals",
                            "Carrier pigeons"
                        ],
                        correct: 1,
                        explanation: "Smart! Future missions will use relay satellites to maintain contact during space weather events!"
                    }
                ],
                4: [
                    {
                        question: "Where might future lunar bases be built for protection?",
                        options: [
                            "On top of mountains",
                            "Inside lava tubes (underground caves)",
                            "Floating in the air",
                            "On the surface with no protection"
                        ],
                        correct: 1,
                        explanation: "Brilliant! Scientists plan to build lunar bases inside lava tubes for natural protection!"
                    },
                    {
                        question: "What special features will lunar bases need?",
                        options: [
                            "Swimming pools",
                            "Underground shelters and radiation-resistant materials",
                            "Basketball courts",
                            "Gardens on the surface"
                        ],
                        correct: 1,
                        explanation: "Perfect! Lunar bases will need underground shelters and special materials to protect from space weather!"
                    }
                ]
            },
            rover: {
                1: [
                    {
                        question: "What happens to rover computer memory during space weather?",
                        options: [
                            "It gets better",
                            "It can get corrupted by radiation",
                            "It grows bigger",
                            "Nothing happens"
                        ],
                        correct: 1,
                        explanation: "Correct! Radiation from space weather can corrupt rover computer memory, just like a computer virus!"
                    },
                    {
                        question: "How do rovers protect themselves from radiation?",
                        options: [
                            "They hide behind rocks",
                            "Radiation-hardened computers that can restart themselves",
                            "They wear tiny spacesuits",
                            "They fly back to Earth"
                        ],
                        correct: 1,
                        explanation: "Smart! Rovers have special radiation-hardened computers and can restart themselves if they crash!"
                    }
                ],
                2: [
                    {
                        question: "How long does it take for signals to travel between Earth and Mars?",
                        options: [
                            "1 second",
                            "4-24 minutes",
                            "1 hour",
                            "1 day"
                        ],
                        correct: 1,
                        explanation: "Amazing! It takes 4-24 minutes for signals to travel between Earth and Mars, depending on their positions!"
                    },
                    {
                        question: "Why must rovers make their own decisions sometimes?",
                        options: [
                            "They're smarter than humans",
                            "Communication delays and space weather disruptions",
                            "They get bored",
                            "They want to explore alone"
                        ],
                        correct: 1,
                        explanation: "Exactly! Rovers must be autonomous because of communication delays and space weather disruptions!"
                    }
                ],
                3: [
                    {
                        question: "What powers Mars rovers?",
                        options: [
                            "Gasoline engines",
                            "Solar panels or nuclear batteries",
                            "Wind power",
                            "Hamster wheels"
                        ],
                        correct: 1,
                        explanation: "Right! Mars rovers use either solar panels or nuclear batteries to stay powered!"
                    },
                    {
                        question: "What advantage do nuclear-powered rovers have?",
                        options: [
                            "They're faster",
                            "They work even during dust storms",
                            "They're prettier",
                            "They can fly"
                        ],
                        correct: 1,
                        explanation: "Perfect! Nuclear-powered rovers can work for years, even during dust storms that block sunlight!"
                    }
                ],
                4: [
                    {
                        question: "What do rovers use to study planets?",
                        options: [
                            "Telescopes only",
                            "Delicate scientific instruments",
                            "Magic wands",
                            "Just cameras"
                        ],
                        correct: 1,
                        explanation: "Great! Rovers carry many delicate scientific instruments to analyze rocks, soil, and atmosphere!"
                    },
                    {
                        question: "What amazing discovery have rovers made about space weather?",
                        options: [
                            "Space weather doesn't exist on Mars",
                            "They've detected space weather events on Mars in real-time",
                            "Space weather makes Mars green",
                            "Space weather only happens on Earth"
                        ],
                        correct: 1,
                        explanation: "Incredible! Rovers have actually detected space weather events happening on Mars in real-time!"
                    }
                ]
            }
        };

        // Final Challenge Quiz Questions - All Categories
        const quizQuestions = {
            general: [
                {
                    question: "What is space weather like?",
                    options: [
                        "Rain and snow from space",
                        "Invisible 'space wind' and bright flashes from the Sun",
                        "Clouds made of stars",
                        "Thunder from planets"
                    ],
                    correct: 1,
                    explanation: "Great job! Space weather is invisible 'space wind' and bright flashes that the Sun sends toward Earth!"
                },
                {
                    question: "What might happen to your phone's GPS during space weather?",
                    options: [
                        "It will work perfectly",
                        "It might show you in the wrong place",
                        "It will turn into a rocket",
                        "It will start playing music"
                    ],
                    correct: 1,
                    explanation: "Correct! Space weather can make GPS confused, so your maps might show you in the wrong place!"
                },
                {
                    question: "How high up are GPS satellites?",
                    options: [
                        "100 feet above Earth",
                        "1,000 miles above Earth",
                        "12,000 miles above Earth",
                        "On the Moon"
                    ],
                    correct: 2,
                    explanation: "Awesome! GPS satellites are 12,000 miles above Earth - that's really high up where space weather is stronger!"
                },
                {
                    question: "What are auroras?",
                    options: [
                        "Scary space monsters",
                        "Beautiful dancing lights in the sky",
                        "Space weather storms",
                        "Broken satellites"
                    ],
                    correct: 1,
                    explanation: "Perfect! Auroras are beautiful dancing lights in the sky - like nature's own fireworks show!"
                },
                {
                    question: "How does Earth protect us from space weather?",
                    options: [
                        "With a giant umbrella",
                        "With an invisible magnetic shield",
                        "With tall buildings",
                        "With clouds"
                    ],
                    correct: 1,
                    explanation: "Excellent! Earth has an invisible magnetic shield that protects us from most space weather!"
                }
            ],
            astronaut: [
                {
                    question: "What is the biggest danger to astronauts from space weather?",
                    options: [
                        "Getting lost in space",
                        "Radiation exposure that can damage DNA",
                        "Running out of snacks",
                        "Feeling lonely"
                    ],
                    correct: 1,
                    explanation: "Correct! Radiation from space weather is the biggest threat - it's like being exposed to thousands of X-rays!"
                },
                {
                    question: "What do astronauts do during severe solar storms?",
                    options: [
                        "Go outside to watch the show",
                        "Take shelter in the most shielded parts of their spacecraft",
                        "Have a space party",
                        "Call their families"
                    ],
                    correct: 1,
                    explanation: "Right! Astronauts retreat to the most protected areas and wait for the storm to pass!"
                },
                {
                    question: "What happens to spacecraft computers during space weather?",
                    options: [
                        "They work better than ever",
                        "They can crash and need rebooting",
                        "They start singing songs",
                        "They become super intelligent"
                    ],
                    correct: 1,
                    explanation: "Exactly! Space weather can cause computer crashes, just like your computer at home sometimes does!"
                },
                {
                    question: "Why are spacewalks cancelled during solar storms?",
                    options: [
                        "Astronauts might float away",
                        "It's too dangerous due to high radiation exposure",
                        "The view isn't as pretty",
                        "Spacesuits get dirty"
                    ],
                    correct: 1,
                    explanation: "Perfect! Outside the spacecraft, astronauts have much less protection from dangerous radiation!"
                },
                {
                    question: "How does the ISS protect its crew from space weather?",
                    options: [
                        "It flies to the Moon",
                        "Special shielded modules and storm procedures",
                        "It turns invisible",
                        "It lands on Earth"
                    ],
                    correct: 1,
                    explanation: "Great! The ISS has special procedures and the crew retreats to the most shielded areas during storms!"
                }
            ],
            farmers: [
                {
                    question: "How do GPS-guided tractors help modern farming?",
                    options: [
                        "They make crops grow faster",
                        "They plant seeds in perfectly straight lines",
                        "They talk to the plants",
                        "They predict the weather"
                    ],
                    correct: 1,
                    explanation: "Correct! GPS helps tractors drive in perfect rows, saving fuel and reducing crop damage!"
                },
                {
                    question: "What happens when space weather affects farm GPS systems?",
                    options: [
                        "Tractors work even better",
                        "Tractors can go off course by several feet",
                        "Crops grow in different colors",
                        "Animals start dancing"
                    ],
                    correct: 1,
                    explanation: "Right! Space weather can make GPS inaccurate, causing precision farming equipment to miss target areas!"
                },
                {
                    question: "Why do farmers rely on weather satellites?",
                    options: [
                        "To take pictures of their farms",
                        "To know when to plant, water, and harvest crops",
                        "To communicate with other farmers",
                        "To scare away pests"
                    ],
                    correct: 1,
                    explanation: "Perfect! Weather satellites provide crucial data for farming decisions and crop management!"
                },
                {
                    question: "What backup technology is helping farmers when satellites fail?",
                    options: [
                        "Hot air balloons",
                        "Drones for crop monitoring",
                        "Carrier pigeons",
                        "Crystal balls"
                    ],
                    correct: 1,
                    explanation: "Excellent! Drones are becoming important backup systems when satellites are affected by space weather!"
                },
                {
                    question: "How do modern irrigation systems communicate?",
                    options: [
                        "Farmers shout really loud",
                        "Computer-controlled systems using radio signals",
                        "Smoke signals",
                        "Telepathy"
                    ],
                    correct: 1,
                    explanation: "Great! Modern farms use sophisticated computer systems that communicate via radio - which space weather can disrupt!"
                }
            ],
            sun: [
                {
                    question: "What are solar flares?",
                    options: [
                        "The Sun's way of waving hello",
                        "Giant explosions on the Sun's surface",
                        "Cool, dark spots on the Sun",
                        "The Sun taking a nap"
                    ],
                    correct: 1,
                    explanation: "Correct! Solar flares are massive explosions that release more energy than billions of nuclear bombs!"
                },
                {
                    question: "How fast do solar flare X-rays reach Earth?",
                    options: [
                        "8 minutes - the same time as sunlight",
                        "8 hours",
                        "8 days",
                        "8 years"
                    ],
                    correct: 0,
                    explanation: "Amazing! Solar flare X-rays travel at the speed of light and reach Earth in just 8 minutes!"
                },
                {
                    question: "What are Coronal Mass Ejections (CMEs)?",
                    options: [
                        "The Sun sneezing",
                        "Massive clouds of solar material hurled into space",
                        "Solar hiccups",
                        "The Sun's way of stretching"
                    ],
                    correct: 1,
                    explanation: "Perfect! CMEs are like solar hurricanes containing billions of tons of material traveling at millions of mph!"
                },
                {
                    question: "How long is the solar cycle?",
                    options: [
                        "1 year",
                        "11 years from quiet to active and back",
                        "1 month",
                        "100 years"
                    ],
                    correct: 1,
                    explanation: "Excellent! The Sun goes through an 11-year cycle from solar minimum to solar maximum and back!"
                },
                {
                    question: "What can happen when a strong CME hits Earth?",
                    options: [
                        "Nothing at all",
                        "Auroras can be seen as far south as Mexico",
                        "The Earth stops spinning",
                        "Everyone gets superpowers"
                    ],
                    correct: 1,
                    explanation: "Incredible! Strong CMEs can cause auroras to be visible much farther from the poles than usual!"
                }
            ],
            moon: [
                {
                    question: "What protection does the Moon have from space weather?",
                    options: [
                        "A thick atmosphere like Earth",
                        "No protection at all - completely exposed",
                        "A strong magnetic field",
                        "Underground bunkers"
                    ],
                    correct: 1,
                    explanation: "Correct! Unlike Earth, the Moon has no atmosphere or magnetic field for protection!"
                },
                {
                    question: "What happens to lunar dust during space weather?",
                    options: [
                        "It disappears completely",
                        "It becomes electrically charged and sticky",
                        "It turns into diamonds",
                        "It changes into different colors"
                    ],
                    correct: 1,
                    explanation: "Right! Space weather makes lunar dust electrically charged, causing it to stick to everything!"
                },
                {
                    question: "What communication problems can space weather cause for lunar missions?",
                    options: [
                        "Radio signals become clearer",
                        "Radio signals get disrupted, causing loss of contact with Earth",
                        "Astronauts start speaking different languages",
                        "Communications become faster"
                    ],
                    correct: 1,
                    explanation: "Exactly! Space weather can disrupt radio communications, leaving lunar missions isolated!"
                },
                {
                    question: "Where do scientists plan to build future lunar bases for protection?",
                    options: [
                        "On the highest mountains",
                        "Inside natural lava tubes (underground caves)",
                        "Floating above the surface",
                        "On the far side only"
                    ],
                    correct: 1,
                    explanation: "Brilliant! Lava tubes provide natural underground protection from space weather and radiation!"
                },
                {
                    question: "What did Apollo astronauts experience with lunar dust?",
                    options: [
                        "It tasted like chocolate",
                        "It got into everything and was very difficult to clean",
                        "It helped them jump higher",
                        "It glowed in the dark"
                    ],
                    correct: 1,
                    explanation: "Perfect! Apollo astronauts had major problems with sticky lunar dust contaminating their equipment!"
                }
            ],
            rover: [
                {
                    question: "What happens to rover computer memory during space weather?",
                    options: [
                        "It becomes super powerful",
                        "It can get corrupted by radiation",
                        "It grows bigger",
                        "It starts dreaming"
                    ],
                    correct: 1,
                    explanation: "Correct! Radiation from space weather can corrupt computer memory, just like a computer virus!"
                },
                {
                    question: "How long does it take for signals to travel between Earth and Mars?",
                    options: [
                        "1 second",
                        "4-24 minutes depending on planetary positions",
                        "1 hour",
                        "Instantly"
                    ],
                    correct: 1,
                    explanation: "Amazing! The communication delay varies from 4-24 minutes as Earth and Mars orbit the Sun!"
                },
                {
                    question: "Why do rovers need to make their own decisions?",
                    options: [
                        "They're smarter than humans",
                        "Communication delays and space weather disruptions",
                        "They get bored waiting",
                        "They want to be independent"
                    ],
                    correct: 1,
                    explanation: "Exactly! Rovers must be autonomous due to communication delays and space weather interference!"
                },
                {
                    question: "What powers Mars rovers?",
                    options: [
                        "Gasoline engines",
                        "Solar panels or nuclear batteries",
                        "Wind turbines",
                        "Hamster wheels"
                    ],
                    correct: 1,
                    explanation: "Right! Rovers use either solar panels (affected by dust storms) or nuclear batteries for reliable power!"
                },
                {
                    question: "What amazing discovery have rovers made about space weather?",
                    options: [
                        "Space weather doesn't exist on Mars",
                        "They've detected space weather events on Mars in real-time",
                        "Space weather makes Mars green",
                        "Space weather only affects Earth"
                    ],
                    correct: 1,
                    explanation: "Incredible! Rovers have actually detected and measured space weather events happening on Mars!"
                }
            ]
        };

        // Open Level Modal
        function openLevel(levelNum) {
            // Check if level is unlocked - now requires quiz completion of previous level
            const completed = completedLevels[currentCategory] || [];
            if (levelNum > 1 && !completed.includes(levelNum - 1)) {
                showCuteMessage("🔒 Complete the previous level's quiz first to unlock this level! 🧠✨");
                return;
            }

            if (levelNum === 5) {
                // Check if level 4 quiz is completed before opening challenge
                if (!completed.includes(4)) {
                    showCuteMessage("🔒 Complete Level 4's quiz first to unlock the challenge! 🏆");
                    return;
                }
                // Open final challenge quiz instead
                openQuiz();
                return;
            }

            const modal = document.getElementById('levelModal');
            const icon = document.getElementById('levelIcon');
            const title = document.getElementById('levelTitle');
            const content = document.getElementById('levelContent');

            const level = levelData[currentCategory][levelNum];
            icon.textContent = level.icon;
            title.textContent = level.title;
            content.innerHTML = level.content;

            currentLevel = levelNum;
            modal.classList.remove('hidden');
        }

        // Open Level Quiz
        function openLevelQuiz() {
            currentLevelQuizQuestion = 0;
            levelQuizScore = 0;
            document.getElementById('levelQuizModal').classList.remove('hidden');
            
            // Update quiz title and icon
            const quizIcon = document.getElementById('levelQuizIcon');
            const quizTitle = document.getElementById('levelQuizTitle');
            const level = levelData[currentLevel];
            
            quizIcon.textContent = level.icon;
            quizTitle.textContent = `${level.title} - Quiz`;
            
            loadLevelQuizQuestion();
        }

        // Open Level Quiz Directly (from orbiting button)
        function openLevelQuizDirect(levelNum) {
            // Check if previous level quiz is completed (except for level 1)
            const completed = completedLevels[currentCategory] || [];
            if (levelNum > 1 && !completed.includes(levelNum - 1)) {
                showCuteMessage("🔒 Complete the previous level's quiz first! 🧠✨");
                return;
            }

            currentLevel = levelNum;
            currentLevelQuizQuestion = 0;
            levelQuizScore = 0;
            document.getElementById('levelQuizModal').classList.remove('hidden');
            
            // Update quiz title and icon
            const quizIcon = document.getElementById('levelQuizIcon');
            const quizTitle = document.getElementById('levelQuizTitle');
            const level = levelData[currentCategory][currentLevel];
            
            quizIcon.textContent = level.icon;
            quizTitle.textContent = `${level.title} - Quiz`;
            
            loadLevelQuizQuestion();
        }

        // Load Level Quiz Question
        function loadLevelQuizQuestion() {
            const questions = levelQuizQuestions[currentCategory][currentLevel];
            const question = questions[currentLevelQuizQuestion];
            const content = document.getElementById('levelQuizContent');
            const currentQ = document.getElementById('currentLevelQuestion');
            const actions = document.getElementById('levelQuizActions');

            currentQ.textContent = currentLevelQuizQuestion + 1;

            content.innerHTML = `
                <div class="text-white">
                    <h3 class="text-xl font-bold mb-6 text-center">${question.question}</h3>
                    <div class="space-y-3">
                        ${question.options.map((option, index) => `
                            <button onclick="selectLevelAnswer(${index})" class="level-quiz-option w-full text-left p-4 bg-purple-900 bg-opacity-50 hover:bg-purple-800 hover:bg-opacity-70 rounded-lg transition-colors border border-purple-400 border-opacity-30">
                                ${option}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;

            actions.innerHTML = `
                <span class="text-purple-200">Choose your answer above! 🤔</span>
            `;
        }

        // Select Level Quiz Answer
        function selectLevelAnswer(selectedIndex) {
            const questions = levelQuizQuestions[currentCategory][currentLevel];
            const question = questions[currentLevelQuizQuestion];
            const options = document.querySelectorAll('.level-quiz-option');
            const actions = document.getElementById('levelQuizActions');

            // Disable all options
            options.forEach(option => option.disabled = true);

            // Show correct/incorrect
            options[selectedIndex].classList.add(selectedIndex === question.correct ? 'bg-green-600' : 'bg-red-600');
            options[question.correct].classList.add('bg-green-600');

            if (selectedIndex === question.correct) {
                levelQuizScore++;
                actions.innerHTML = `
                    <div class="text-center">
                        <p class="text-green-400 mb-2">🎉 Correct! ${question.explanation}</p>
                        <button onclick="nextLevelQuestion()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg">
                            ${currentLevelQuizQuestion < 1 ? 'Next Question 🚀' : 'See Results 🌟'}
                        </button>
                    </div>
                `;
            } else {
                actions.innerHTML = `
                    <div class="text-center">
                        <p class="text-red-400 mb-2">😅 Oops! ${question.explanation}</p>
                        <button onclick="nextLevelQuestion()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">
                            ${currentLevelQuizQuestion < 1 ? 'Next Question 🚀' : 'See Results 🌟'}
                        </button>
                    </div>
                `;
            }
        }

        // Next Level Quiz Question
        function nextLevelQuestion() {
            currentLevelQuizQuestion++;
            if (currentLevelQuizQuestion < 2) {
                loadLevelQuizQuestion();
            } else {
                showLevelQuizResults();
            }
        }

        // Show Level Quiz Results
        function showLevelQuizResults() {
            document.getElementById('levelQuizModal').classList.add('hidden');
            
            let stars, title, message, animation;
            let levelPassed = false;
            
            if (levelQuizScore === 2) {
                stars = "⭐⭐";
                title = "Perfect Score!";
                message = `You mastered Level ${currentLevel}! 🌟`;
                animation = "🎉";
                levelPassed = true;
            } else if (levelQuizScore === 1) {
                stars = "⭐";
                title = "Good Job!";
                message = `You passed Level ${currentLevel}! 🚀`;
                animation = "🌟";
                levelPassed = true;
            } else {
                stars = "💫";
                title = "Keep Learning!";
                message = `Try reading Level ${currentLevel} again! 🤗`;
                animation = "🤗";
            }

            // If passed (score >= 1), mark level as completed and unlock next level
            const completed = completedLevels[currentCategory] || [];
            if (levelPassed && !completed.includes(currentLevel)) {
                completedLevels[currentCategory].push(currentLevel);
                
                // Save progress to localStorage
                saveProgress();
                
                // Update level button appearance
                const levelBtn = document.getElementById(`level${currentLevel}`);
                levelBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                levelBtn.classList.add('border-yellow-400');
                levelBtn.querySelector('.level-stars').classList.remove('hidden');
                
                // Update progress stars
                updateProgressStars();
                
                // Unlock next level ONLY after quiz completion
                if (currentLevel < 4) {
                    const nextLevelBtn = document.getElementById(`level${currentLevel + 1}`);
                    nextLevelBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                    nextLevelBtn.classList.add('border-white');
                    const lockIcon = nextLevelBtn.querySelector('.absolute.inset-0');
                    if (lockIcon) lockIcon.classList.add('hidden');
                    
                    message += ` Level ${currentLevel + 1} unlocked! 🔓`;
                } else if (currentLevel === 4) {
                    // Unlock challenge level after completing level 4 quiz
                    const challengeBtn = document.getElementById('level5');
                    challengeBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                    challengeBtn.classList.add('border-white');
                    const lockIcon = challengeBtn.querySelector('.absolute.inset-0');
                    if (lockIcon) lockIcon.classList.add('hidden');
                    
                    message += ` Challenge level unlocked! 🏆`;
                }
            }

            // Show reward modal
            document.getElementById('rewardStars').textContent = stars;
            document.getElementById('rewardTitle').textContent = title;
            document.getElementById('rewardMessage').textContent = message;
            document.getElementById('rewardAnimation').textContent = animation;
            document.getElementById('rewardModal').classList.remove('hidden');

            // If score is low, offer retry
            if (levelQuizScore < 1) {
                setTimeout(() => {
                    showLevelQuizRetryOption();
                }, 3000);
            }
        }

        // Show Level Quiz Retry Option
        function showLevelQuizRetryOption() {
            const rewardModal = document.getElementById('rewardModal');
            const modalContent = rewardModal.querySelector('.bg-gradient-to-br');
            
            modalContent.innerHTML = `
                <div class="text-center">
                    <div class="text-6xl mb-4">🤗</div>
                    <h2 class="text-2xl font-bold text-white mb-4">Want to try again?</h2>
                    <p class="text-white mb-6">No worries! Practice makes perfect. Let's give it another shot! 🚀</p>
                    <div class="space-y-3">
                        <button onclick="retryLevelQuiz()" class="w-full bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-bold transition-colors">
                            📝 Try Quiz Again!
                        </button>
                        <button onclick="closeRewardModal()" class="w-full bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-bold transition-colors">
                            Continue Learning 🌟
                        </button>
                    </div>
                </div>
            `;
        }

        // Retry Level Quiz
        function retryLevelQuiz() {
            closeRewardModal();
            openLevelQuiz();
        }

        // Close Level Quiz Modal
        function closeLevelQuizModal() {
            document.getElementById('levelQuizModal').classList.add('hidden');
        }

        // Close Level Modal
        function closeLevelModal() {
            document.getElementById('levelModal').classList.add('hidden');
        }

        // Complete Level (Reading Only - No Level Unlock)
        function completeLevel() {
            // Just show completion message, but don't unlock next level
            showCuteMessage(`📚 Great! You read Level ${currentLevel}! Now take the quiz to unlock the next level! 🧠✨`);
            closeLevelModal();
        }

        // Update Progress Stars
        function updateProgressStars() {
            const progressStars = document.getElementById('progressStars').children;
            const completed = completedLevels[currentCategory] || [];
            
            // Reset all stars
            for (let i = 0; i < 5; i++) {
                progressStars[i].classList.remove('text-yellow-400');
                progressStars[i].classList.add('text-gray-400');
            }
            
            // Light up stars for completed levels
            for (let i = 0; i < completed.length && i < 4; i++) {
                progressStars[i].classList.remove('text-gray-400');
                progressStars[i].classList.add('text-yellow-400');
            }
            // Quiz completion updates the 5th star (handled in quiz results)
        }

        // Open Quiz
        function openQuiz() {
            const completed = completedLevels[currentCategory] || [];
            if (!completed.includes(4)) {
                showCuteMessage("🔒 Complete Level 4's quiz first to unlock the challenge! 🏆🧠");
                return;
            }

            currentQuizQuestion = 0;
            quizScore = 0;
            document.getElementById('quizModal').classList.remove('hidden');
            loadQuizQuestion();
        }

        // Load Quiz Question
        function loadQuizQuestion() {
            const questions = quizQuestions[currentCategory];
            const question = questions[currentQuizQuestion];
            const content = document.getElementById('quizContent');
            const currentQ = document.getElementById('currentQuestion');
            const actions = document.getElementById('quizActions');

            currentQ.textContent = currentQuizQuestion + 1;

            content.innerHTML = `
                <div class="text-white">
                    <h3 class="text-xl font-bold mb-6 text-center">${question.question}</h3>
                    <div class="space-y-3">
                        ${question.options.map((option, index) => `
                            <button onclick="selectAnswer(${index})" class="quiz-option w-full text-left p-4 bg-blue-900 bg-opacity-50 hover:bg-blue-800 hover:bg-opacity-70 rounded-lg transition-colors border border-blue-400 border-opacity-30">
                                ${option}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;

            actions.innerHTML = `
                <span class="text-pink-200">Choose your answer above! 🤔</span>
            `;
        }

        // Select Quiz Answer
        function selectAnswer(selectedIndex) {
            const questions = quizQuestions[currentCategory];
            const question = questions[currentQuizQuestion];
            const options = document.querySelectorAll('.quiz-option');
            const actions = document.getElementById('quizActions');

            // Disable all options
            options.forEach(option => option.disabled = true);

            // Show correct/incorrect
            options[selectedIndex].classList.add(selectedIndex === question.correct ? 'bg-green-600' : 'bg-red-600');
            options[question.correct].classList.add('bg-green-600');

            if (selectedIndex === question.correct) {
                quizScore++;
                actions.innerHTML = `
                    <div class="text-center">
                        <p class="text-green-400 mb-2">🎉 Correct! ${question.explanation}</p>
                        <button onclick="nextQuestion()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg">
                            Next Question 🚀
                        </button>
                    </div>
                `;
            } else {
                actions.innerHTML = `
                    <div class="text-center">
                        <p class="text-red-400 mb-2">😅 Oops! ${question.explanation}</p>
                        <button onclick="nextQuestion()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">
                            Next Question 🚀
                        </button>
                    </div>
                `;
            }
        }

        // Next Quiz Question
        function nextQuestion() {
            currentQuizQuestion++;
            const questions = quizQuestions[currentCategory];
            if (currentQuizQuestion < questions.length) {
                loadQuizQuestion();
            } else {
                showQuizResults();
            }
        }

        // Show Quiz Results
        function showQuizResults() {
            document.getElementById('quizModal').classList.add('hidden');
            
            let stars, title, message, animation;
            
            if (quizScore === 5) {
                stars = "⭐⭐⭐";
                title = "INCREDIBLE! Perfect Score!";
                message = "You're a true Space Weather Expert! 🌟";
                animation = "🎉";
                
                // Mark challenge as completed and save progress
                const completed = completedLevels[currentCategory] || [];
                if (!completed.includes(5)) {
                    completedLevels[currentCategory].push(5);
                    saveProgress();
                }
                
                // Update final progress star
                const progressStars = document.getElementById('progressStars').children;
                progressStars[4].classList.remove('text-gray-400');
                progressStars[4].classList.add('text-yellow-400');
                
                // Update challenge level appearance
                const level5Btn = document.getElementById('level5');
                level5Btn.classList.add('border-yellow-400');
                level5Btn.querySelector('.level-stars').classList.remove('hidden');
                
            } else if (quizScore >= 3) {
                stars = "⭐⭐";
                title = "Great Job!";
                message = "You know a lot about space weather! 🚀";
                animation = "🌟";
            } else {
                stars = "⭐";
                title = "Good Try!";
                message = "Keep learning, space explorer! 🛸";
                animation = "🤗";
            }

            // Show reward modal
            document.getElementById('rewardStars').textContent = stars;
            document.getElementById('rewardTitle').textContent = title;
            document.getElementById('rewardMessage').textContent = message;
            document.getElementById('rewardAnimation').textContent = animation;
            document.getElementById('rewardModal').classList.remove('hidden');

            // If score is low, offer retry
            if (quizScore < 3) {
                setTimeout(() => {
                    showRetryOption();
                }, 3000);
            }
        }

        // Show Retry Option
        function showRetryOption() {
            const rewardModal = document.getElementById('rewardModal');
            const modalContent = rewardModal.querySelector('.bg-gradient-to-br');
            
            modalContent.innerHTML = `
                <div class="text-center">
                    <div class="text-6xl mb-4">🤗</div>
                    <h2 class="text-2xl font-bold text-white mb-4">Want to try again?</h2>
                    <p class="text-white mb-6">No worries! Even real astronauts need practice. Let's give it another shot! 🚀</p>
                    <div class="space-y-3">
                        <button onclick="retryQuiz()" class="w-full bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-bold transition-colors">
                            🚀 Try Challenge Again!
                        </button>
                        <button onclick="closeRewardModal()" class="w-full bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-bold transition-colors">
                            Continue Exploring 🌟
                        </button>
                    </div>
                </div>
            `;
        }

        // Retry Quiz
        function retryQuiz() {
            closeRewardModal();
            openQuiz();
        }

        // Close Quiz Modal
        function closeQuizModal() {
            document.getElementById('quizModal').classList.add('hidden');
        }

        // Close Reward Modal
        function closeRewardModal() {
            document.getElementById('rewardModal').classList.add('hidden');
        }

        // Show Cute Message
        function showCuteMessage(message) {
            // Create temporary message popup
            const messageDiv = document.createElement('div');
            messageDiv.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-full shadow-lg z-50 animate-bounce';
            messageDiv.textContent = message;
            
            document.body.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }

        // Logout Function
        function logout() {
            // Save current progress before logging out
            saveProgress();
            
            // Show logout confirmation with progress saved message
            const logoutDiv = document.createElement('div');
            logoutDiv.className = 'fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50';
            logoutDiv.innerHTML = `
                <div class="bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900 rounded-2xl p-8 max-w-md mx-4 shadow-2xl border border-blue-400 border-opacity-50 text-center">
                    <div class="text-6xl mb-4">👋</div>
                    <h2 class="text-2xl font-bold text-white mb-4">Logging Out...</h2>
                    <div class="bg-green-900 bg-opacity-50 rounded-lg p-4 mb-6">
                        <div class="text-green-400 font-bold mb-2">✅ Progress Saved!</div>
                        <p class="text-green-200 text-sm">Your space exploration progress has been safely stored. You can continue your journey anytime!</p>
                    </div>
                    <p class="text-blue-200 mb-6">Thanks for exploring space weather with us! 🚀</p>
                    <div class="space-y-3">
                        <button onclick="confirmLogout()" class="w-full bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-bold transition-colors">
                            🚪 Confirm Logout
                        </button>
                        <button onclick="cancelLogout()" class="w-full bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-bold transition-colors">
                            🚀 Continue Mission
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(logoutDiv);
        }

        // Confirm Logout
        function confirmLogout() {
            // Clear current user session
            currentUser = null;
            currentCategory = 'general';
            
            // Reset astronaut name
            document.getElementById('astronautName').textContent = 'Space Explorer';
            
            // Hide all sections and show login
            document.getElementById('categoriesSection').classList.add('hidden');
            document.getElementById('generalPublicSection').classList.add('hidden');
            document.getElementById('spaceWeatherSection').classList.add('hidden');
            document.getElementById('launchSection').classList.add('hidden');
            document.getElementById('profileSection').classList.add('hidden');
            
            // Remove logout confirmation
            const logoutDiv = document.querySelector('.fixed.inset-0.bg-black.bg-opacity-70');
            if (logoutDiv) logoutDiv.remove();
            
            // Show login section with fade in
            const loginSection = document.getElementById('loginSection');
            loginSection.classList.remove('hidden', 'fade-out');
            
            // Show animated rocket again
            const rocket = document.getElementById('animatedRocket');
            rocket.style.display = 'block';
            
            // Clear login form
            document.getElementById('loginForm').reset();
            
            // Show success logout message
            setTimeout(() => {
                showCuteMessage("👋 Logged out successfully! Your progress is saved! 🌟");
            }, 500);
        }

        // Cancel Logout
        function cancelLogout() {
            const logoutDiv = document.querySelector('.fixed.inset-0.bg-black.bg-opacity-70');
            if (logoutDiv) logoutDiv.remove();
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'989b233836f67e72',t:'MTc1OTY0ODYyOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
